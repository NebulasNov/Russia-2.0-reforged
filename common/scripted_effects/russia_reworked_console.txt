d_russia_reworked_show_errors = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            check_variable = {
                var = global.russia_reworked_core_file_missing
                value = 1
                compare = greater_than_or_equals
            }
        }
        log = " [?global.russia_reworked_core_file_missing] core files missing."
    }
    else = {
        log = " No core file missing."
    }

    if = {
        limit = {
            check_variable = {
                var = global.russia_reworked_noncore_file_missing
                value = 1
                compare = greater_than_or_equals
            }
        }
        log = " [?global.russia_reworked_noncore_file_missing] non-core files missing."
    }
    else = {
        log = " No non-core file missing."
    }

    log = " Note : The result of this might not be accurate."
    log = "           You might or might not have conflicts that we did not detect."
}

d_russia_reworked_refresh_democratic_gui = {
    calculate_sov_gui_percentage_democratic_vote = yes
    log = "Russia Reworked debug :"
    log = " Voting progress bar refreshed."
}

d_russia_reworked_set_revolution_scale = {
    if = {
        limit = {
            OR = {
                check_variable = {
                    var = args^num
                    value = 1
                    compare = less_than
                }
                check_variable = {
                    var = args^num
                    value = 1
                    compare = greater_than
                }
            }
        }
        log = "Error :"
        log = " Expected [?1|Y0] argument, got [?args^num|R0]."
    }
    else = {
        log = "Russia Reworked debug :"
        set_variable = { SOV.revolution_count = args^0 }
        set_variable = { SOV.revolution_count_gui = SOV.revolution_count }
		multiply_variable = { SOV.revolution_count_gui = 100 }
        set_variable = { SOV.revolution_final_count = 12 }
        subtract_from_variable = { SOV.revolution_final_count = SOV.revolution_count }
        clamp_variable = {
            var = SOV.revolution_count
            min = 0
            max = 12
        }
        clamp_variable = {
            var = SOV.revolution_count_gui
            min = 0
            max = 1000
        }
        clamp_variable = {
            var = SOV.revolution_final_count
            min = 0
            max = 12
        }
        log = " Set revolution scale to [?SOV.revolution_count|Y0]."
    }
}

d_russia_reworked_annex_cores = {
    if = {
        limit = {
            is_debug = yes
        }
        log = "Russia Reworked debug :"
        every_state = {
            limit = {
                is_core_of = FROM
                NOT = {
                    is_owned_by = FROM
                }
            }
            FROM = {
                transfer_state = PREV
            }
            log = " Transfered [THIS.GetName] to [FROM.GetNameDef]."
        }
    }
    else = {
        log = "Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_annex_claims = {
    if = {
        limit = {
            is_debug = yes
        }
        log = "Russia Reworked debug :"
        every_state = {
            limit = {
                is_claimed_by = FROM
                NOT = {
                    is_owned_by = FROM
                }
            }
            FROM = {
                transfer_state = PREV
            }
            log = " Transfered [THIS.GetName] to [FROM.GetNameDef]."
        }
    }
    else = {
        log = "Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_annex_puppets = {
    if = {
        limit = {
            is_debug = yes
        }
        log = "Russia Reworked debug :"
        every_other_country = {
            limit = {
                is_subject_of = FROM
            }
            FROM = {
                annex_country = {
                    target = PREV
                    transfer_troops = yes
                }
            }
            log = " Annexed [THIS.GetName]."
        }
    }
    else = {
        log = "Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_battle_royale = {
    if = {
        limit = {
            NOT = {
                has_global_flag = russia_reworked_battle_royale_allowed
            }
        }
        set_global_flag = russia_reworked_battle_royale_allowed
        log = "Russia Reworked debug :"
        log = " Are you sure? There is no going back!"
        log = " Launch this console command again to confirm."
        log = " Make sure to pause the game (it might lag for a moment)."
    }
    else_if = {
        limit = {
            has_global_flag = russia_reworked_battle_royale_launched
        }
        log = "Russia Reworked debug :"
        log = " The battle royale has already been launched."
    }
    else_if = {
        limit = {
            NOT = {
                any_of_scopes = {
                    array = global.russia_reworked_russian_states
                    
                    exists = yes
                }
            }
        }
        log = "Russia Reworked debug :"
        log = " Not enough countries exist to launch a battle royale."
    }
    else = {
        for_each_scope_loop = {
            array = global.russia_reworked_russian_states

            if = {
                limit = {
                    exists = yes
                }
                if = {
                    limit = {
                        is_in_faction = yes
                    }
                    leave_faction = yes
                }
                if = {
                    limit = {
                        is_subject = yes
                    }
                    OVERLORD = {
                        set_autonomy = {
                            target = PREV
                            autonomy_state = autonomy_free
                        }
                    }
                }
            }
        }

        for_each_scope_loop = {
            array = global.russia_reworked_russian_states

            if = {
                limit = {
                    exists = yes
                }
                for_each_scope_loop = {
                    array = global.russia_reworked_russian_states

                    if = {
                        limit = {
                            exists = yes
                            NOT = {
                                tag = PREV
                                has_war_with = PREV
                                is_subject = yes
                                is_in_faction = yes
                            }
                        }
                        PREV = {
                            declare_war_on = {
                                target = PREV
                                type = annex_everything
                            }
                        }
                    }
                }
            }
        }
        set_global_flag = russia_reworked_battle_royale_launched
        log = "Russia Reworked debug :"
        log = " Battle Royale begins!"
    }
}

d_russia_reworked_battle_royale_with_sov = {
    if = {
        limit = {
            SOV = {
                exists = yes
            }
        }
        if = {
            limit = {
                NOT = {
                    has_global_flag = russia_reworked_battle_royale_allowed
                }
            }
            set_global_flag = russia_reworked_battle_royale_allowed
            log = "Russia Reworked debug :"
            log = " Are you sure? There is no going back!"
            log = " Launch this console command again to confirm."
            log = " Make sure to pause the game (it might lag for a moment)."
        }
        else_if = {
            limit = {
                has_global_flag = russia_reworked_battle_royale_launched
            }
            log = "Russia Reworked debug :"
            log = " The battle royale has already been launched."
        }
        else_if = {
            limit = {
                NOT = {
                    any_of_scopes = {
                        array = global.russia_reworked_russian_states
                        
                        exists = yes
                    }
                }
            }
            log = "Russia Reworked debug :"
            log = " Not enough countries exist to launch a battle royale."
        }
        else = {
            add_to_array = { global.russia_reworked_russian_states = SOV }
            for_each_scope_loop = {
                array = global.russia_reworked_russian_states

                if = {
                    limit = {
                        exists = yes
                    }
                    if = {
                        limit = {
                            is_in_faction = yes
                        }
                        leave_faction = yes
                    }
                    if = {
                        limit = {
                            is_subject = yes
                        }
                        OVERLORD = {
                            set_autonomy = {
                                target = PREV
                                autonomy_state = autonomy_free
                            }
                        }
                    }
                }
            }

            for_each_scope_loop = {
                array = global.russia_reworked_russian_states

                if = {
                    limit = {
                        exists = yes
                    }
                    for_each_scope_loop = {
                        array = global.russia_reworked_russian_states

                        if = {
                            limit = {
                                exists = yes
                                NOT = {
                                    tag = PREV
                                    has_war_with = PREV
                                    is_subject = yes
                                    is_in_faction = yes
                                }
                            }
                            PREV = {
                                declare_war_on = {
                                    target = PREV
                                    type = annex_everything
                                }
                            }
                        }
                    }
                }
            }
            remove_from_array = { global.russia_reworked_russian_states = SOV }
            set_global_flag = russia_reworked_battle_royale_launched
            log = "Russia Reworked debug :"
            log = " Battle Royale begins!"
        }
    }
    else = {
        log = "Russia Reworked debug :"
        log = " [SOV.GetNameDefCap] doesn't exist!"
    }
}

d_russia_reworked_debug_output = {
    if = {
        limit = {
            is_debug = yes
        }
        #Whatever to test here
        set_variable = { SOV.date_test = global.date }
        log = "Date : [?SOV.date_test.GetDateString]"
    }
    else = {
        log = "Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_lock_all_templates = {
    country_lock_all_division_template = yes
    log = "Templates locked."
}

d_russia_reworked_unlock_all_templates = {
    country_lock_all_division_template = no
    division_template = {
        name = "Vozdushno-Desantnaya Brigada"
        is_locked = no
        division_names_group = SOV_PAR_01

        regiments = {
            paratrooper = { x = 0 y = 0 }
            paratrooper = { x = 0 y = 1 }
        }
    }
    log = "Templates unlocked."
}