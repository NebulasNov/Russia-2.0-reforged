d_russia_reworked_show_errors = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            check_variable = {
                var = global.russia_reworked_core_file_missing
                value = 1
                compare = greater_than_or_equals
            }
        }
        log = " [?global.russia_reworked_core_file_missing] core files missing."
    }
    else = {
        log = " No core file missing."
    }

    if = {
        limit = {
            check_variable = {
                var = global.russia_reworked_noncore_file_missing
                value = 1
                compare = greater_than_or_equals
            }
        }
        log = " [?global.russia_reworked_noncore_file_missing] non-core files missing."
    }
    else = {
        log = " No non-core file missing."
    }

    log = " Note : The result of this might not be accurate."
    log = "           You might or might not have conflicts that we did not detect."
}

d_russia_reworked_refresh_democratic_gui = {
    calculate_sov_gui_percentage_democratic_vote = yes
    log = "Russia Reworked debug :"
    log = " Voting progress bar refreshed."
}

d_russia_reworked_set_revolution_scale = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            OR = {
                check_variable = {
                    var = args^num
                    value = 1
                    compare = less_than
                }
                check_variable = {
                    var = args^num
                    value = 1
                    compare = greater_than
                }
            }
        }
        log = " Error :"
        log = " Expected [?1|Y0] argument, got [?args^num|R0]."
    }
    else = {
        set_variable = { SOV.revolution_count = args^0 }
        set_variable = { SOV.revolution_count_gui = SOV.revolution_count }
		multiply_variable = { SOV.revolution_count_gui = 100 }
        set_variable = { SOV.revolution_final_count = 12 }
        subtract_from_variable = { SOV.revolution_final_count = SOV.revolution_count }
        clamp_variable = {
            var = SOV.revolution_count
            min = 0
            max = 12
        }
        clamp_variable = {
            var = SOV.revolution_count_gui
            min = 0
            max = 1000
        }
        clamp_variable = {
            var = SOV.revolution_final_count
            min = 0
            max = 12
        }
        log = " Set revolution scale to [?SOV.revolution_count|Y0]."
    }
}

d_russia_reworked_annex_cores = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            is_debug = yes
        }
        every_state = {
            limit = {
                is_core_of = FROM
                NOT = {
                    is_owned_by = FROM
                }
            }
            FROM = {
                transfer_state = PREV
            }
            log = " Transfered [THIS.GetName] to [FROM.GetNameDef]."
        }
    }
    else = {
        log = " Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_annex_claims = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            is_debug = yes
        }
        every_state = {
            limit = {
                is_claimed_by = FROM
                NOT = {
                    is_owned_by = FROM
                }
            }
            FROM = {
                transfer_state = PREV
            }
            log = " Transfered [THIS.GetName] to [FROM.GetNameDef]."
        }
    }
    else = {
        log = " Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_annex_puppets = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            is_debug = yes
        }
        every_other_country = {
            limit = {
                is_subject_of = FROM
            }
            FROM = {
                annex_country = {
                    target = PREV
                    transfer_troops = yes
                }
            }
            log = " Annexed [THIS.GetName]."
        }
    }
    else = {
        log = " Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_battle_royale = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            NOT = {
                has_global_flag = russia_reworked_battle_royale_allowed
            }
        }
        set_global_flag = russia_reworked_battle_royale_allowed
        log = " Are you sure? There is no going back!"
        log = " Launch this console command again to confirm."
        log = " Make sure to pause the game (it might lag for a moment)."
    }
    else_if = {
        limit = {
            has_global_flag = russia_reworked_battle_royale_launched
        }
        log = " The battle royale has already been launched."
    }
    else_if = {
        limit = {
            NOT = {
                any_of_scopes = {
                    array = global.russia_reworked_russian_states
                    
                    exists = yes
                }
            }
        }
        log = " Not enough countries exist to launch a battle royale."
    }
    else = {
        for_each_scope_loop = {
            array = global.russia_reworked_russian_states

            if = {
                limit = {
                    exists = yes
                }
                if = {
                    limit = {
                        is_in_faction = yes
                    }
                    leave_faction = yes
                }
                if = {
                    limit = {
                        is_subject = yes
                    }
                    OVERLORD = {
                        set_autonomy = {
                            target = PREV
                            autonomy_state = autonomy_free
                        }
                    }
                }
            }
        }

        for_each_scope_loop = {
            array = global.russia_reworked_russian_states

            if = {
                limit = {
                    exists = yes
                }
                for_each_scope_loop = {
                    array = global.russia_reworked_russian_states

                    if = {
                        limit = {
                            exists = yes
                            NOT = {
                                tag = PREV
                                has_war_with = PREV
                                is_subject = yes
                                is_in_faction = yes
                            }
                        }
                        PREV = {
                            declare_war_on = {
                                target = PREV
                                type = annex_everything
                            }
                        }
                    }
                }
            }
        }
        set_global_flag = russia_reworked_battle_royale_launched
        log = " Battle Royale begins!"
    }
}

d_russia_reworked_battle_royale_with_sov = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            SOV = {
                exists = yes
            }
        }
        if = {
            limit = {
                NOT = {
                    has_global_flag = russia_reworked_battle_royale_allowed
                }
            }
            set_global_flag = russia_reworked_battle_royale_allowed
            log = " Are you sure? There is no going back!"
            log = " Launch this console command again to confirm."
            log = " Make sure to pause the game (it might lag for a moment)."
        }
        else_if = {
            limit = {
                has_global_flag = russia_reworked_battle_royale_launched
            }
            log = " The battle royale has already been launched."
        }
        else_if = {
            limit = {
                NOT = {
                    any_of_scopes = {
                        array = global.russia_reworked_russian_states
                        
                        exists = yes
                    }
                }
            }
            log = " Not enough countries exist to launch a battle royale."
        }
        else = {
            add_to_array = { global.russia_reworked_russian_states = SOV }
            for_each_scope_loop = {
                array = global.russia_reworked_russian_states

                if = {
                    limit = {
                        exists = yes
                    }
                    if = {
                        limit = {
                            is_in_faction = yes
                        }
                        leave_faction = yes
                    }
                    if = {
                        limit = {
                            is_subject = yes
                        }
                        OVERLORD = {
                            set_autonomy = {
                                target = PREV
                                autonomy_state = autonomy_free
                            }
                        }
                    }
                }
            }

            for_each_scope_loop = {
                array = global.russia_reworked_russian_states

                if = {
                    limit = {
                        exists = yes
                    }
                    for_each_scope_loop = {
                        array = global.russia_reworked_russian_states

                        if = {
                            limit = {
                                exists = yes
                                NOT = {
                                    tag = PREV
                                    has_war_with = PREV
                                    is_subject = yes
                                    is_in_faction = yes
                                }
                            }
                            PREV = {
                                declare_war_on = {
                                    target = PREV
                                    type = annex_everything
                                }
                            }
                        }
                    }
                }
            }
            remove_from_array = { global.russia_reworked_russian_states = SOV }
            set_global_flag = russia_reworked_battle_royale_launched
            log = " Battle Royale begins!"
        }
    }
    else = {
        log = " [SOV.GetNameDefCap] doesn't exist!"
    }
}

d_russia_reworked_debug_output = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            is_debug = yes
        }
        #Whatever to test here
        set_variable = { SOV.date_test = global.date }
        log = " Date : [?SOV.date_test.GetDateString]"
    }
    else = {
        log = " Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_lock_all_templates = {
    log = "Russia Reworked debug :"
    country_lock_all_division_template = yes
    log = " Templates locked."
}

d_russia_reworked_unlock_all_templates = {
    log = "Russia Reworked debug :"
    country_lock_all_division_template = no
    division_template = {
        name = "Vozdushno-Desantnaya Brigada"
        is_locked = no
        division_names_group = SOV_PAR_01

        regiments = {
            paratrooper = { x = 0 y = 0 }
            paratrooper = { x = 0 y = 1 }
        }
    }
    log = " Templates unlocked."
}

d_russia_reworked_is_in_array_scw_debug = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            is_debug = yes
        }
        if = {
            limit = {
                check_variable = {
                    var = args^num
                    value = 0
                    compare = greater_than
                }
            }
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants = var:args^0 }
                }
                log = " True"
            }
            else = {
                log = " False"
            }
        }
        else = {
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants = SOV }
                }
                log = " SOV : True"
            }
            else = {
                log = " SOV : False"
            }
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants = SOU }
                }
                log = " SOU : True"
            }
            else = {
                log = " SOU : False"
            }
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants = UKR }
                }
                log = " UKR : True"
            }
            else = {
                log = " UKR : False"
            }
        }
    }
    else = {
        log = " Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_clean_scw_array = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            is_debug = yes
        }
        sov_clean_scw_arrays = yes
    }
    else = {
        log = " Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_turn_ukr_anarchist = {
    log = "Russia Reworked debug :"
    if = {
        limit = {
            is_debug = yes
        }
        if = {
            limit = {
                UKR = {
                    exists = yes
                    is_subject = no
                    NOT = {
                        has_government = anarchy
                    }
                }
            }
            UKR = {
                set_politics = {
                    ruling_party = anarchy
                    elections_allowed = no
                }
                clr_country_flag = ukr_anarchist_rebels
                custom_effect_tooltip = ukr_loses_all_cores
                custom_effect_tooltip = ukr_unlocks_anarchist_legetimacy_decisions
                add_ideas = UKR_Free_state
                add_popularity = {
                    ideology = anarchy
                    popularity = 0.5
                }
                set_temp_variable = { anarchy_support_divided_by_two = ukr.party_popularity_100@anarchy }
                divide_temp_variable = { anarchy_support_divided_by_two = 2 }
                for_each_loop = {
                    array = ukr.core_states
                    value = v
                    index = i
                    break = break_array

                    add_to_array = { ukr.temp_core_states = var:v }
                }
                for_each_loop = {
                    array = ukr.temp_core_states
                    value = v
                    index = i
                    break = break_array

                    if = {
                        limit = {
                            var:v = {
                                is_capital = yes
                                is_controlled_by = UKR
                            }
                        }
                        set_variable = { ukr.anarchist_support@var:v = 100 }
                    }
                    else = {
                        if = {
                            limit = {
                                var:v = {
                                    is_controlled_by = UKR
                                }
                            }
                            set_variable = { ukr.anarchist_support@var:v = var:anarchy_support_divided_by_two }
                        }
                        var:v = {
                            remove_core_of = UKR
                        }
                    }
                }
                ukr_update_state_cost = yes
                ukr_update_anarchist_states = yes
                ukr_update_current_view = yes
                ukr_add_daily_gain_anarchist_states = yes
                add_ideas = UKR_Anarchist_legitimacy
                for_each_scope_loop = {
                    array = global.russian_scw_participants

                    country_event = ukrains.39
                }
            }
            log = " Ukraine is now Anarchist."
        }
        else = {
            log = " Error :"
            log = " Cannot turn [UKR.GetNameDef] Anarchist at the moment."
        }
    }
    else = {
        log = " Error :"
        log = " Only allowed in debug mode!"
    }
}

d_russia_reworked_display_debug_variable = {
    log = "[USA.GetNameDefCap] : [?USA.max_available_manpower_k|0]"
    log = "[SOV.GetNameDefCap] : [?SOV.max_available_manpower_k]"
    log = "[FRA.GetNameDefCap] : [?FRA.max_available_manpower_k]"
    log = "[GER.GetNameDefCap] : [?GER.max_available_manpower_k]"
    log = "[ITA.GetNameDefCap] : [?ITA.max_available_manpower_k|0]"
    log = "[JAP.GetNameDefCap] : [?JAP.max_available_manpower_k]"
    log = "[ENG.GetNameDefCap] : [?ENG.max_available_manpower_k]"
    log = "[ROOT.GetNameDefCap] : [?max_available_manpower_k]"
}