#Second Civil War
#Setup SOV
sov_setup_scw = {
    SOV = {
        add_to_array = { global.russian_scw_participants = SOV.id }
        add_to_array = { global.russian_scw_participants_sov = SOV.id }
        country_lock_all_division_template = no
        division_template = {
            name = "Patrul'nyy Ttryad Militsii"
            is_locked = no
            division_names_group = SOV_CAV_01

            regiments = {
                cavalry = { x = 0 y = 0 }
                cavalry = { x = 0 y = 1 }
                cavalry = { x = 1 y = 0 }
                cavalry = { x = 1 y = 1 }
            }
            support = 	{
                military_police = { x = 0 y = 0 }
            }
        }
        division_template = {
            name = "Vozdushno-Desantnaya Brigada"
            is_locked = no
            division_names_group = SOV_PAR_01

            regiments = {
                paratrooper = { x = 0 y = 0 }
                paratrooper = { x = 0 y = 1 }
            }
        }
        delete_unit_template_and_units = {
            division_template = "Strelkovaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Gornostrelkovaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Motostrelkovaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Kavaleriyskaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "NKVD Pogranichnaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Mekhanizirovaniy Korpus"
        }
        load_oob = "SOV_civil_war"
        if = {
            limit = {
                is_ai = yes
            }
            add_command_power = 100
        }
        remove_ideas = SOV_Prepare_second_war
        remove_ideas = SOV_Terrible_fate
        remove_ideas = SOV_Army_disorganisation
        add_ideas = SOV_Supply_line
        add_ideas = SOV_Second_civil_war
        add_ideas = SOV_Urals_secret
        add_ideas = SOV_Slow_industry
        clr_country_flag = second_civil_war_mission
        country_event = { id = ukrains.31 days = 1 }
        country_event = { id = soviets.136 days = 6 }
        country_event = { id = soviets.227 days = 15 }
        set_country_flag = preparation_done
        set_country_flag = ennemy_second_civil_war
        set_country_flag = ennemy_second_civil_war_mikhail
        set_country_flag = ennemy_second_civil_war_georgy_zhu
        set_country_flag = ennemy_second_civil_war_konev
        set_country_flag = ennemy_second_civil_war_vasilevsky
        set_cosmetic_tag = WMA
        dismantle_faction = yes
        create_faction = anti_communist_coalition
        retire_ideology_leader = communism
        582 = {
            add_province_modifier = {
                static_modifiers = { urals_secret }
                province = 4383
                province = 12200
                province = 7373
                province = 4311
                province = 7300
                province = 10185
                province = 4265
            }
        }
        573 = {
            add_province_modifier = {
                static_modifiers = { urals_secret }
                province = 12117
                province = 10329
                province = 11223
                province = 7320
                province = 4758
                province = 237
                province = 11307
                province = 278
            }
        }
        581 = {
            add_province_modifier = {
                static_modifiers = { urals_secret }
                province = 10216
                province = 4874
                province = 12659
                province = 7824
                province = 10551
                province = 10677
                province = 12502
                province = 13076
            }
        }
        every_army_leader = {
            retire = yes
        }
        create_corps_commander = {
            name = "Alexander Gorbatov"
            picture = "Portrait_Soviet_Alexander_Gorbatov.dds"
            traits = { career_officer cavalry_officer }
            skill = 3
            attack_skill = 2
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Andrey Vlasov"
            picture = "Portrait_Soviet_Andrey_Vlasov.dds"
            traits = { winter_specialist infantry_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 3
            planning_skill = 1
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Konstantin Rokossovsky"
            picture = "Portrait_Soviet_Konstantin_Rokossovsky.dds"
            traits = {  armor_officer trait_cautious brilliant_strategist }
            skill = 4
            attack_skill = 3
            defense_skill = 4
            planning_skill = 2
            logistics_skill = 4
        }
        create_corps_commander = {
            name = "Pyotr Krasnov"
            picture = "Portrait_Pyotr_Nikolayevich_Krasnov.dds"
            traits = { trait_reckless infantry_officer trait_mountaineer }
            skill = 4
            attack_skill = 4
            defense_skill = 3
            planning_skill = 3
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Pavel Bermondt-Avalov"
            id = 513
            picture = "Portrait_Pavel_Bermondt_Avalov.dds"
            traits = { infantry_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Abram Dragomirov"
            picture = "Portrait_Abram_Dragomirov.dds"
            traits = { cavalry_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Mikhail Diterikhs"
            id = 511
            picture = "Portrait_Mikhail_Diterikhs.dds"
            traits = {  }
            skill = 2
            attack_skill = 2
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Alexander V. Golubintzev"
            picture = "Portrait_Alexander_Golubintzev.dds"
            traits = { cavalry_officer }
            skill = 4
            attack_skill = 3
            defense_skill = 2
            planning_skill = 1
            logistics_skill = 4
        }
        create_corps_commander = {
            name = "Vladimir Kislitsin"
            id = 515
            picture = "Portrait_Vladimir_Kislitsin.dds"
            traits = { brilliant_strategist }
            skill = 3
            attack_skill = 3
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Viktorin Molchanov"
            id = 517
            picture = "Portrait_Viktorin_Molchanov.dds"
            traits = { winter_specialist inflexible_strategist }
            skill = 4
            attack_skill = 3
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Grigory Mikhaylovich Semyonov"
            picture = "Potrait_Grigory_Mikhaylovich_Semyonov.dds"
            traits = { harsh_leader }
            skill = 3
            attack_skill = 3
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Andrei Shkuro"
            id = 518
            picture = "Portrait_Andrei_Shkuro.dds"
            traits = { brilliant_strategist trickster }
            skill = 3
            attack_skill = 3
            defense_skill = 1
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Boris Shteifon"
            picture = "Portrait_Boris_Shteifon.dds"
            traits = { war_hero trickster }
            skill = 3
            attack_skill = 3
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Vladimir Sidorin"
            picture = "Portrait_Vladimir_Sidorin.dds"
            traits = { trait_reckless }
            skill = 2
            attack_skill = 2
            defense_skill = 3
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Mikhail Skorodumov"
            id = 516
            picture = "Potrait_Mikhail_Skorodumov.dds"
            traits = { trait_reckless bearer_of_artillery }
            skill = 3
            attack_skill = 4
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Konstantin Petrovich Nechaev"
            picture = "Portrait_Konstantin_Petrovich_Nechaev.dds"
            traits = { cavalry_officer inflexible_strategist }
            skill = 3
            attack_skill = 4
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Mikhail Pleshkov"
            picture = "Portrait_Mikhail_Pleshkov.dds"
            traits = { cavalry_officer }
            skill = 2
            attack_skill = 3
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Anton Turkul"
            picture = "Portrait_Anton_Turkul.dds"
            traits = { infantry_officer }
            skill = 3
            
            attack_skill = 2
            defense_skill = 2
            planning_skill = 1
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Isaac Bykadorov"
            picture = "Portrait_Isaac_Bykadorov.dds"
            traits = { war_hero trait_reckless }
            skill = 3
            
            attack_skill = 3
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Vyacheslav Naumenko"
            picture = "Portrait_Vyacheslav_Grigoryevich_Naumenko.dds"
            traits = { war_hero }
            skill = 2
            
            attack_skill = 3
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Fedor Abramov"
            picture = "Portrait_Fedor_Abramov.dds"
            traits = { cavalry_officer bearer_of_artillery }
            skill = 3
            
            attack_skill = 2
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Bronislaw Kaminski"
            picture = "Portrait_Bronislav_Kaminsky.dds"
            traits = { harsh_leader }
            skill = 2
            
            attack_skill = 2
            defense_skill = 1
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Vladimir Marushevsky"
            picture = "Portrait_Vladimir_Marushevsky.dds"
            traits = { infantry_officer }
            skill = 2
            
            attack_skill = 2
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Vladimir Kharzhevsky"
            picture = "Portrait_Vladimir_Kharzhevsky.dds"
            traits = { }
            skill = 2
            
            attack_skill = 1
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Vladimir Vitkovsky"
            picture = "Portrait_Vladimir_Vitkovsky.dds"
            traits = { trait_reckless }
            skill = 2
            
            attack_skill = 2
            defense_skill = 1
            planning_skill = 2
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Pavel Shatilov"
            picture = "Portrait_Pavel_Shatilov.dds"
            traits = { cavalry_officer }
            skill = 4
            
            attack_skill = 3
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Ivan Kononov"
            picture = "Portrait_Ivan_Kononov.dds"
            traits = { cavalry_officer }
            skill = 3
            
            attack_skill = 3
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Pyotr Vladimirovich Glazenap"
            picture = "Portrait_Peter_Glazenap.dds"
            traits = { cavalry_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 2
            planning_skill = 1
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Alexander Lukomsky"
            picture = "Portrait_Alexander_Lukomsky.dds"
            traits = { trait_engineer  }
            skill = 3
            attack_skill = 2
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 3
        }
        create_field_marshal = {
            name = "Yevgeny Miller"
            picture = "Potrait_Yevgeny_Miller.dds"
            traits = { infantry_leader brilliant_strategist organisational_leader }
            skill = 3
            attack_skill = 3
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 2
        }
        create_field_marshal = {
            name = "Anton Ivanovich Denikin"
            id = 514
            picture = "Portrait_Soviet_Anton_IvanovichMilitary.dds"
            traits = { infantry_leader bearer_of_artillery offensive_doctrine }
            skill = 5
            attack_skill = 4
            defense_skill = 3
            planning_skill = 4
            logistics_skill = 3
        }
        create_field_marshal = {
            name = "Alexander Rodzyanko"
            id = 512
            picture = "Portrait_Alexander_Rodzyanko.dds"
            traits = { inspirational_leader cavalry_officer }
            skill = 2
            attack_skill = 2
            defense_skill = 2
            planning_skill = 4
            logistics_skill = 2
        }
        set_politics = {
            ruling_party = neutrality
        }
        set_popularities = {
            democratic = 33
            neutrality = 33
            fascism = 33
            communism = 1
        }
        create_country_leader = {
            name = "Anton Denikin"
            desc = "POLITICS_ANTON_DENIKIN_DESC"
            picture = "Portrait_Soviet_Anton_IvanovichMilitary.dds"
            expire = "1947.8.8"
            ideology = oligarchism
            traits = {
                war_veteran
            }
        }
        add_ideas = war_economy
        add_ideas = limited_conscription
    }
}

#Setup SOU
sov_spawn_sou_scw = {
    add_to_array = { global.russian_scw_participants = SOU.id }
    add_to_array = { global.russian_scw_participants_sou = SOU.id }
    every_state = {
        limit = {
            is_core_of = SOV
            is_owned_by = SOV
            NOT = {
                state = 408
				state = 409
				state = 560
				state = 655
				state = 537
				state = 657
				state = 561
				state = 574
				state = 562
				state = 637
				state = 644
				state = 563
				state = 565
				state = 564
				state = 575
				state = 516
				state = 566
				state = 567
				state = 576
				state = 568
				state = 569
				state = 578
				state = 570
				state = 577
				state = 571
				state = 654
				state = 40
				state = 588
				state = 589
            }
        }
        SOU = {
            add_state_core = PREV
            transfer_state = PREV
        }
    }
    if = {
        limit = {
            SOV = {
                has_country_flag = control_caucasus
            }
        }
        every_state = {
            limit = {
                is_owned_by = SOU
                OR = {
                    state = 233
                    state = 232
                    state = 235
                    state = 234
                }
            }
            SOV = {
                transfer_state = PREV
            }
        }
    }
    SOU = {
        load_oob = "SOU_civil_war"
        inherit_technology = SOV
        country_event = { id = soviets.186 days = 1 }
        add_ideas = SOV_Second_civil_war
        add_ideas = SOV_Supply_line
        add_ideas = SOV_Urals_secret
        add_ideas = SOV_Slow_industry
        unlock_national_focus = SOV_great_purge2
        create_corps_commander = {
            name = "Georgy Zhukov"
            picture = "Portrait_Soviet_Georgy_Zhukov.dds"
            traits = { winter_specialist armor_officer media_personality war_hero }
            skill = 5
            attack_skill = 5
            defense_skill = 2
            planning_skill = 4
            logistics_skill = 5
        }
        create_corps_commander = {
            name = "Aleksandr Vasilevsky"
            picture = "Portrait_Soviet_Aleksandr_Vasilevsky.dds"
            traits = { armor_officer politically_connected }
            skill = 4
            attack_skill = 4
            defense_skill = 4
            planning_skill = 3
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Boris Shaposhnikov"
            picture = "Portrait_Soviet_Boris_Shaposhnikov.dds"
            traits = { trait_cautious career_officer }
            skill = 3
            attack_skill = 2
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Nikolai Vatutin"
            picture = "Portrait_Soviet_Nikolai_Fyodorovich_Vatutin.dds"
            traits = { infantry_officer trait_reckless }
            skill = 3
            attack_skill = 1
            defense_skill = 3
            planning_skill = 3
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Ivan Konev"
            picture = "Portrait_Soviet_Ivan_Konev.dds"
            traits = { armor_officer harsh_leader politically_connected }
            skill = 5
            attack_skill = 4
            defense_skill = 5
            planning_skill = 2
            logistics_skill = 5
        }
        create_corps_commander = {
            name = "Semyon Timoshenko"
            picture = "Portrait_Soviet_semyon_timoshenko.dds"
            traits = { cavalry_officer politically_connected career_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 2
            planning_skill = 2
            logistics_skill = 3
        }
        create_field_marshal = {
            name = "Kliment Voroshilov"
            picture = "Portrait_Soviet_Kliment_Voroshilov.dds"
            traits = { old_guard politically_connected inflexible_strategist }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_field_marshal = {
            name = "Mikhail Tukhachevsky"
            picture = "Portrait_Soviet_Mikhail_Tukhachevsky.dds"
            traits = { offensive_doctrine brilliant_strategist career_officer infantry_officer trait_reckless }
            skill = 4
            attack_skill = 3
            defense_skill = 4
            planning_skill = 4
            logistics_skill = 2
        }
        create_field_marshal = {
            name = "Semyon Budyonny"
            picture = "Portrait_Soviet_Semyon_Budyonny.dds"
            traits = { old_guard politically_connected inflexible_strategist }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Ivan Chernyakhovsky"
            picture = "Portrait_Soviet_Ivan_Chernyakhovsky.dds"
            traits = { armor_officer }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Issa Pliyev"
            picture = "Portrait_Soviet_Issa_Pliyev.dds"
            traits = { cavalry_officer }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Leonid Govorov"
            picture = "Portrait_Soviet_Leonid_Govorov.dds"
            traits = {   }
            skill = 3
            attack_skill = 3
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 2
        }
        create_field_marshal = {
            name = "Grigory Kulik"
            picture = "Portrait_Soviet_Grigory_Kulik.dds"
            traits = { old_guard career_officer politically_connected inflexible_strategist }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Kirill Meretskov"
            picture = "Portrait_Soviet_Kirill_Meretskov.dds"
            traits = { trait_reckless infantry_officer }
            skill = 3
            attack_skill = 2
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Filipp Golikov"
            picture = "Portrait_Soviet_Filipp_Golikov.dds"
            traits = { career_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 3
            planning_skill = 3
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Andrey Yeryomenko"
            picture = "Portrait_Soviet_Andrey_Yeryomenko.dds"
            traits = { cavalry_officer trait_reckless }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Georgiy Zakharov"
            picture = "Portrait_Soviet_Georgiy_Zakharov.dds"
            traits = { career_officer }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Yakov Cherevichenko"
            picture = "Portrait_Soviet_Yakov_Cherevichenko.dds"
            traits = { cavalry_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Max Reyter"
            picture = "Portrait_Soviet_Max_Andreyevich.dds"
            traits = { career_officer }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Nikandr Chibisov"
            picture = "Portrait_Soviet_Nikandr_Yevlampyevich_Chibisov.dds"
            traits = { trickster }
            skill = 3
            attack_skill = 1
            defense_skill = 3
            planning_skill = 3
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Vasily Kuznetsov"
            picture = "Portrait_Soviet_Vasily_Kuznetsov.dds"
            traits = { commando infantry_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Ivan Fedyuninsky"
            picture = "Portrait_Soviet_Ivan_Fedyuninsky.dds"
            traits = { infantry_officer }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Maksim Purkayev"
            picture = "Portrait_Soviet_Maksim_Purkayev.dds"
            traits = { career_officer }
            skill = 3
            attack_skill = 2
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Kuzma Galitsky"
            picture = "Portrait_Soviet_Kuzma_Galitsky.dds"
            traits = { infantry_officer }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Markian Popov"
            picture = "Portrait_Soviet_Matkian_Popov.dds"
            traits = { winter_specialist infantry_officer brilliant_strategist }
            skill = 2
            attack_skill = 2
            defense_skill = 1
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Nikolai Berzarin"
            picture = "Portrait_Soviet_Nikolai_Berzarin.dds"
            traits = { infantry_officer }
            skill = 3
            attack_skill = 3
            defense_skill = 3
            planning_skill = 2
            logistics_skill = 2
        }
        create_corps_commander = {
            name = "Kirill Moskalenko"
            picture = "Portrait_Soviet_Kirill_Moskalenko.dds"
            traits = {  }
            skill = 3

            attack_skill = 2
            defense_skill = 2
            planning_skill = 3
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Dmitry Lelyushenko"
            picture = "Portrait_Soviet_Dmitri_Danilovich_Lelyushenko.dds"
            traits = {armor_officer trait_reckless  }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Andrei Grechko"
            picture = "Portrait_Soviet_Andrei_Antonovich_Grechko.dds"
            traits = { cavalry_officer }
            skill = 3
            attack_skill = 1
            defense_skill = 3
            planning_skill = 3
            logistics_skill = 3
        }
        create_corps_commander = {
            name = "Rodion Malinovsky"
            picture = "Portrait_Soviet_Rodion_Malinovsky.dds"
            traits = { career_officer old_guard trait_cautious politically_connected }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
        create_corps_commander = {
            name = "Vasily Chuikov"
            picture = "Portrait_Soviet_Vasily_Chuikov.dds"
            traits = { brilliant_strategist career_officer }
            skill = 1
            attack_skill = 1
            defense_skill = 1
            planning_skill = 1
            logistics_skill = 1
        }
    }
}

#Setup CRI
sov_spawn_cri_scw = {
    CRI = {
        if = {
            limit = {
                137 = {
                    NOT = {
                        is_core_of = CRI
                    }
                }
            }
            add_state_core = 137
        }
        transfer_state = 137
        set_politics = {
            ruling_party = democratic
            elections_allowed = no
        }
        add_ideas = CRI_Neutral_zone
        division_template = {
            name = "Crimean Infantry"
            is_locked = no

            regiments = {
                infantry = { x = 0 y = 0 }
                infantry = { x = 0 y = 1 }
                infantry = { x = 0 y = 2 }
                infantry = { x = 1 y = 0 }
                infantry = { x = 1 y = 1 }
                infantry = { x = 1 y = 2 }
                infantry = { x = 2 y = 0 }
                infantry = { x = 2 y = 1 }
                infantry = { x = 2 y = 2 }
            }
            support = {
                artillery = { x = 0 y = 0 }
            }
        }
        random_owned_controlled_state = {
            create_unit = {
                division = "name = \"1st Crimean Infantry\" division_template = \"Crimean Infantry\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
                owner = CRI
            }
            create_unit = {
                division = "name = \"2nd Crimean Infantry\" division_template = \"Crimean Infantry\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
                owner = CRI
            }
            create_unit = {
                division = "name = \"3rd Crimean Infantry\" division_template = \"Crimean Infantry\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
                owner = CRI
            }
            create_unit = {
                division = "name = \"4th Crimean Infantry\" division_template = \"Crimean Infantry\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
                owner = CRI
            }
        } 
    }
}

#Setup UKR
sov_spawn_ukr_scw = {
    add_to_array = { global.russian_scw_participants_ukr = UKR.id }
    every_state = {
        limit = {
            OR = {
                is_owned_by = SOV
                is_owned_by = SOU
            }
            is_core_of = UKR
        }
        UKR = {
            transfer_state = PREV
        }
    }
    UKR = {
        if = {
            limit = {
                is_subject = yes
            }
            OVERLORD = {
                set_autonomy = {
                    target = UKR
                    autonomy_state = autonomy_free
                }
            }
        }
        if = {
            limit = {
                is_in_faction = yes
            }
            leave_faction = yes
        }
        set_politics = {
            ruling_party = neutrality
        }
        add_ideas = UKR_Provisional_government
        set_country_flag = ukr_anarchist_rebels
        #Balancing
        random_owned_state = {
            add_extra_state_shared_building_slots = 3
            add_building_construction = {
                type = arms_factory
                level = 3
                instant_build = yes
            }
        }
        division_template = {
            name = "Ukrainian Division"
            priority = 1
            regiments = {
                infantry = { x = 0 y = 0 }
                infantry = { x = 0 y = 1 }
                infantry = { x = 0 y = 2 }
                infantry = { x = 0 y = 3 }
                infantry = { x = 0 y = 4 }
                infantry = { x = 1 y = 0 }
                infantry = { x = 1 y = 1 }
                infantry = { x = 1 y = 2 }
                infantry = { x = 1 y = 3 }
            }
            support = {
                engineer = { x = 0 y = 0 }
                artillery = { x = 0 y = 1 }
            }
        }
        division_template = {
            name = "Ukrainian Mechanized Division"
            priority = 1
            regiments = {
                light_armor = { x = 0 y = 0 }
                light_armor = { x = 0 y = 1 }
                light_armor = { x = 1 y = 0 }
                light_armor = { x = 1 y = 1 }
                light_armor = { x = 1 y = 2 }
                motorized = { x = 2 y = 0 }
                motorized = { x = 2 y = 1 }
                motorized = { x = 2 y = 2 }
                motorized = { x = 2 y = 3 }
            }
            support = {
                engineer = { x = 0 y = 0 }
            }
        }
        set_division_template_lock = {
            division_template = "NKVD Pogranichnaya Diviziya"
            is_locked = no
        }
        201 = {
            create_unit = {
                division = "name = \"1st Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9493
            }
            create_unit = {
                division = "name = \"2nd Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 11477
            }
            create_unit = {
                division = "name = \"3rd Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9466
            }
        }
        202 = {
            create_unit = {
                division = "name = \"4th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9568
            }
            create_unit = {
                division = "name = \"5th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 489
            }
            create_unit = {
                division = "name = \"6th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9568
            }
            create_unit = {
                division = "name = \"7th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 489
            }
        }
        193 = {
            create_unit = {
                division = "name = \"8th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 3568
            }
            create_unit = {
                division = "name = \"9th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 546
            }
            create_unit = {
                division = "name = \"10th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 6589
            }
            create_unit = {
                division = "name = \"1st Guards Army\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 238
            }
        }
        225 = {
            create_unit = {
                division = "name = \"13th Army\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 3225
            }
            create_unit = {
                division = "name = \"38th Army\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 11553
            }
            create_unit = {
                division = "name = \"11th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 6565
            }
            create_unit = {
                division = "name = \"12th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 522
            }
            create_unit = {
                division = "name = \"13th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 3520
            }
            create_unit = {
                division = "name = \"14th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 501
            }
        }
        221 = {
            create_unit = {
                division = "name = \"15th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 11397
            }
            create_unit = {
                division = "name = \"16th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 418
            }
            create_unit = {
                division = "name = \"16th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9556
            }
            create_unit = {
                division = "name = \"17th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 3409
            }
            create_unit = {
                division = "name = \"18th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 11541
            }
        }
        228 = {
            create_unit = {
                division = "name = \"19th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 570
            }
            create_unit = {
                division = "name = \"20th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 11513
            }
            create_unit = {
                division = "name = \"21th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 547
            }
            create_unit = {
                division = "name = \"22th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9476
            }
            create_unit = {
                division = "name = \"23th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9461
            }
            create_unit = {
                division = "name = \"24th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 9446
            }
        }
        227 = {
            create_unit = {
                division = "name = \"25th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 6493
            }
            create_unit = {
                division = "name = \"26th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 3421
            }
            create_unit = {
                division = "name = \"27th Ukrainian Division\" division_template = \"Ukrainian Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
                prioritize_location = 6493
            }
        }
        203 = {
            create_unit = {
                division = "name = \"6th Guards Tank Army\" division_template = \"Ukrainian Mechanized Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
            }
            create_unit = {
                division = "name = \"8th Tank Army\" division_template = \"Ukrainian Mechanized Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                owner = UKR
            }
        }
        division_template = {
            name = "Vozdushno-Desantnaya Brigada"
            is_locked = no
            division_names_group = SOV_PAR_01

            regiments = {
                paratrooper = { x = 0 y = 0 }
                paratrooper = { x = 0 y = 1 }
            }
        }
        delete_unit_template_and_units = {
            division_template = "Strelkovaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Gornostrelkovaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Motostrelkovaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Kavaleriyskaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "NKVD Pogranichnaya Diviziya"
        }
        delete_unit_template_and_units = {
            division_template = "Mekhanizirovaniy Korpus"
        }
    }
}

#Liberate the Caucasus if the player has the Country Flag
sov_liberate_caucasus_scw = {
    if= {
        limit = {
            SOV = {
                has_country_flag = control_caucasus
            }
        }
        add_to_array = { global.russian_scw_participants = GEO.id }
        add_to_array = { global.russian_scw_participants_sov = GEO.id }
        add_to_array = { global.russian_scw_participants = ARM.id }
        add_to_array = { global.russian_scw_participants_sov = ARM.id }
        add_to_array = { global.russian_scw_participants = AZR.id }
        add_to_array = { global.russian_scw_participants_sov = AZR.id }
        SOU = {
            release = GEO
            release = AZR
            release = ARM
            add_state_core = 231
            add_state_core = 230
            add_state_core = 229
        }
        SOV = {
            set_autonomy = {
                target = GEO
                autonomy_state = autonomy_dominion
            }
        }
        SOV = {
            set_autonomy = {
                target = ARM
                autonomy_state = autonomy_dominion
            }
        }
        SOV = {
            set_autonomy = {
                target = AZR
                autonomy_state = autonomy_dominion
            }
        }
        GEO = {
            random_owned_state = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = arms_factory
                    level = 2
                    instant_build = yes
                }
            }
            division_template = {
                name = "Georgian Imperial Division"
                priority = 1
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 0 y = 3 }
                }
            }
            set_division_template_lock = {
                division_template = "NKVD Pogranichnaya Diviziya"
                is_locked = no
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"1st Georgian Imperial Division\" division_template = \"Georgian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = GEO
                }
                create_unit = {
                    division = "name = \"2nd Georgian Imperial Division\" division_template = \"Georgian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = GEO
                }
                create_unit = {
                    division = "name = \"3rd Georgian Imperial Division\" division_template = \"Georgian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = GEO
                }
                create_unit = {
                    division = "name = \"4th Georgian Imperial Division\" division_template = \"Georgian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = GEO
                }
                create_unit = {
                    division = "name = \"5th Georgian Imperial Division\" division_template = \"Georgian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = GEO
                }
                create_unit = {
                    division = "name = \"6th Georgian Imperial Division\" division_template = \"Georgian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = GEO
                }
            }
        }
        ARM = {
            random_owned_state = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = arms_factory
                    level = 2
                    instant_build = yes
                }
            }
            division_template = {
                name = "Armenian Imperial Division"
                priority = 1
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 0 y = 3 }
                }
            }
            set_division_template_lock = {
                division_template = "NKVD Pogranichnaya Diviziya"
                is_locked = no
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"1st Armenian Imperial Division\" division_template = \"Armenian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = ARM
                }
                create_unit = {
                    division = "name = \"2nd Armenian Imperial Division\" division_template = \"Armenian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = ARM
                }
                create_unit = {
                    division = "name = \"3rd Armenian Imperial Division\" division_template = \"Armenian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = ARM
                }
                create_unit = {
                    division = "name = \"4th Armenian Imperial Division\" division_template = \"Armenian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = ARM
                }
            }
        }
        AZR = {
            random_owned_state = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = arms_factory
                    level = 2
                    instant_build = yes
                }
            }
            division_template = {
                name = "Azerbaijan Imperial Division"
                priority = 1
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 0 y = 3 }
                }
            }
            set_division_template_lock = {
                division_template = "NKVD Pogranichnaya Diviziya"
                is_locked = no
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"1st Azerbaijan Imperial Division\" division_template = \"Azerbaijan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = AZR
                }
                create_unit = {
                    division = "name = \"2nd Azerbaijan Imperial Division\" division_template = \"Azerbaijan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = AZR
                }
                create_unit = {
                    division = "name = \"3rd Azerbaijan Imperial Division\" division_template = \"Azerbaijan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = AZR
                }
                create_unit = {
                    division = "name = \"4th Azerbaijan Imperial Division\" division_template = \"Azerbaijan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = AZR
                }
            }
        }
        SOV = {
            if = {
                limit = {
                    NOT = {
                        has_country_flag = train_caucasian_soldiers_civil_war
                    }
                }
                division_template = {
                    name = "Kavkazskaya kazach'ya diviziya"
                    priority = 1
                    regiments = {
                        infantry = { x = 0 y = 0 }
                        infantry = { x = 0 y = 1 }
                        infantry = { x = 0 y = 2 }
                        infantry = { x = 0 y = 3 }
                        infantry = { x = 0 y = 4 }
                    }
                }
                234 = {
                    create_unit = {
                        division = "name = \"1ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6741
                    }
                    create_unit = {
                        division = "name = \"2ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6783
                    }
                    create_unit = {
                        division = "name = \"3ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 765
                    }
                    create_unit = {
                        division = "name = \"4ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9744
                    }
                    create_unit = {
                        division = "name = \"5ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3765
                    }
                    create_unit = {
                        division = "name = \"6ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6781
                    }
                    create_unit = {
                        division = "name = \"7ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3734
                    }
                    create_unit = {
                        division = "name = \"8ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3734
                    }
                }
                235 = {
                    create_unit = {
                        division = "name = \"9ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9742
                    }
                    create_unit = {
                        division = "name = \"10ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9688
                    }
                    create_unit = {
                        division = "name = \"11ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 11727
                    }
                    create_unit = {
                        division = "name = \"12ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9722
                    }
                    create_unit = {
                        division = "name = \"13ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9705
                    }
                    create_unit = {
                        division = "name = \"14ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 11693
                    }
                    create_unit = {
                        division = "name = \"15ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 11690
                    }
                    create_unit = {
                        division = "name = \"16ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9707
                    }
                }
                232 = {
                    create_unit = {
                        division = "name = \"17ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 728
                    }
                    create_unit = {
                        division = "name = \"18ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6748
                    }
                    create_unit = {
                        division = "name = \"19ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3672
                    }
                }
            }
            else_if = {
                limit = {
                    has_country_flag = train_caucasian_soldiers_civil_war
                }
                division_template = {
                    name = "Opytnyy Kavkazskaya kazach'ya diviziya"
                    priority = 1
                    regiments = {
                        infantry = { x = 0 y = 0 }
                        infantry = { x = 0 y = 1 }
                        infantry = { x = 0 y = 2 }
                        infantry = { x = 0 y = 3 }
                        infantry = { x = 0 y = 4 }
                        infantry = { x = 1 y = 0 }
                        infantry = { x = 1 y = 1 }
                    }
                    support = {
                        engineer = { x = 0 y = 0 }
                        recon = { x = 0 y = 1 }
                    }
                }
                division_template = {
                    name = "Kavkazskaya kazach'ya diviziya"
                    priority = 1
                    regiments = {
                        cavalry = { x = 0 y = 0 }
                        cavalry = { x = 0 y = 1 }
                        cavalry = { x = 0 y = 2 }
                        cavalry = { x = 0 y = 3 }
                    }
                }
                234 = {
                    create_unit = {
                        division = "name = \"1ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6741
                    }
                    create_unit = {
                        division = "name = \"2ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6783
                    }
                    create_unit = {
                        division = "name = \"3ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 765
                    }
                    create_unit = {
                        division = "name = \"4ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9744
                    }
                    create_unit = {
                        division = "name = \"5ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3765
                    }
                    create_unit = {
                        division = "name = \"6ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6781
                    }
                    create_unit = {
                        division = "name = \"7ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3734
                    }
                    create_unit = {
                        division = "name = \"8ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3734
                    }
                }
                235 = {
                    create_unit = {
                        division = "name = \"9ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9742
                    }
                    create_unit = {
                        division = "name = \"10ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9688
                    }
                    create_unit = {
                        division = "name = \"11ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 11727
                    }
                    create_unit = {
                        division = "name = \"12ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9722
                    }
                    create_unit = {
                        division = "name = \"13ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9705
                    }
                    create_unit = {
                        division = "name = \"14ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 11693
                    }
                    create_unit = {
                        division = "name = \"15ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 11690
                    }
                    create_unit = {
                        division = "name = \"16ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 9707
                    }
                }
                232 = {
                    create_unit = {
                        division = "name = \"17ya Opytnyy Kavkazskaya kazach'ya diviziya\" division_template = \"Opytnyy Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 728
                    }
                    create_unit = {
                        division = "name = \"18ya Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 6748
                    }
                    create_unit = {
                        division = "name = \"19th Kavkazskaya kazach'ya diviziya\" division_template = \"Kavkazskaya kazach'ya diviziya\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                        owner = SOV
                        prioritize_location = 3672
                    }
                }
            }
        }
    }
    else_if = {
        limit = {
            AND = {
                SOV = {
                    NOT = {
                        has_country_flag = control_caucasus
                    }
                }
                OR = {
                    country_exists = GEO
                    country_exists = AZR
                    country_exists = ARM
                }
            }
        }
        SOU = {
            annex_country = {
                target = ARM
                transfer_troops = no
            }
            annex_country = {
                target = GEO
                transfer_troops = no
            }
            annex_country = {
                target = AZR
                transfer_troops = no
            }
            add_state_core = 231
            add_state_core = 230
            add_state_core = 229
        }
    }
}

#Liberate Central Asia If the Player Has the Country Flag
sov_liberate_central_asia_scw = {
    if= {
        limit = {
            SOV = {
                has_country_flag = control_central_asia
            }
        }
        add_to_array = { global.russian_scw_participants = KAZ.id }
        add_to_array = { global.russian_scw_participants_sov = KAZ.id }
        add_to_array = { global.russian_scw_participants = TMS.id }
        add_to_array = { global.russian_scw_participants_sov = TMS.id }
        SOU = {
            release = KAZ
            release = TMS
            transfer_state = 407
            transfer_state = 406
            add_state_core = 407
            add_state_core = 406
            add_state_core = 402
            add_state_core = 587
            add_state_core = 583
            add_state_core = 404
            add_state_core = 590
            add_state_core = 586
            add_state_core = 732
            add_state_core = 742
            add_state_core = 405
            add_state_core = 585
            add_state_core = 584
        }
        SOV = {
            set_autonomy = {
                target = KAZ
                autonomy_state = autonomy_dominion
            }
            set_autonomy = {
                target = TMS
                autonomy_state = autonomy_dominion
            }
        }
        TMS = {
            transfer_state = 585
            transfer_state = 405
            transfer_state = 742
            transfer_state = 732
            add_state_core = 585
            add_state_core = 405
            add_state_core = 742
            add_state_core = 732
        }
        KAZ = {
            random_owned_state = {
                add_extra_state_shared_building_slots = 3
                add_building_construction = {
                    type = arms_factory
                    level = 3
                    instant_build = yes
                }
            }
            division_template = {
                name = "Kazakh Imperial Division"
                priority = 1
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 0 y = 3 }
                    infantry = { x = 0 y = 4 }
                    infantry = { x = 1 y = 0 }
                }
                support = {
                    engineer = { x = 0 y = 0 }
                }
            }
            set_division_template_lock = {
                division_template = "NKVD Pogranichnaya Diviziya"
                is_locked = no
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"1st Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"2nd Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"3rd Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"4th Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"5th Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"6th Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"7th Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"8th Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"9th Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
                create_unit = {
                    division = "name = \"10th Kazakh Imperial Division\" division_template = \"Kazakh Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = KAZ
                }
            }
        }
        TMS = {
            random_owned_state = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = arms_factory
                    level = 2
                    instant_build = yes
                }
            }
            random_owned_state = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
                    type = industrial_complex
                    level = 2
                    instant_build = yes
                }
            }
            division_template = {
                name = "Turkmenistan Imperial Division"
                priority = 1
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 0 y = 3 }
                    infantry = { x = 0 y = 4 }
                }
            }
            set_division_template_lock = {
                division_template = "NKVD Pogranichnaya Diviziya"
                is_locked = no
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"1st Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
                create_unit = {
                    division = "name = \"2nd Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
                create_unit = {
                    division = "name = \"3rd Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
                create_unit = {
                    division = "name = \"4th Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
                create_unit = {
                    division = "name = \"5th Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
                create_unit = {
                    division = "name = \"6th Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
                create_unit = {
                    division = "name = \"7th Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
                create_unit = {
                    division = "name = \"8th Turkmenistan Imperial Division\" division_template = \"Turkmenistan Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = TMS
                }
            }
        }
    }
    else_if = {
        limit = {
            AND = {
                SOV = {
                    NOT = {
                        has_country_flag = control_central_asia
                    }
                }
                OR = {
                    country_exists = KAZ
                    country_exists = TMS
                    country_exists = UZB
                    country_exists = TAJ
                    country_exists = KYR
                }
            }
        }
        SOU = {
            annex_country = {
                target = KAZ
                transfer_troops = no
            }
            annex_country = {
                target = TMS
                transfer_troops = no
            }
            annex_country = {
                target = UZB
                transfer_troops = no
            }
            annex_country = {
                target = TAJ
                transfer_troops = no
            }
            annex_country = {
                target = KYR
                transfer_troops = no
            }
            transfer_state = 407
            transfer_state = 406
            add_state_core = 407
            add_state_core = 406
            add_state_core = 402
            add_state_core = 587
            add_state_core = 583
            add_state_core = 404
            add_state_core = 590
            add_state_core = 586
            add_state_core = 732
            add_state_core = 742
            add_state_core = 405
            add_state_core = 585
            add_state_core = 584
        }
    }
}

#Liberate Belarus If the Player Has the Country Flag
sov_liberate_belarus_scw = {
    if= {
        limit = {
            SOV = {
                has_country_flag = control_belarus
            }
        }
        add_to_array = { global.russian_scw_participants = BLR.id }
        add_to_array = { global.russian_scw_participants_sov = BLR.id }
        SOU = {
            release = BLR
            add_state_core = 207
            add_state_core = 206
            add_state_core = 241
            add_state_core = 204
            add_state_core = 194
        }
        SOV = {
            set_autonomy = {
                target = BLR
                autonomy_state = autonomy_dominion
            }
        }
        BLR = {
            random_owned_state = {
                add_extra_state_shared_building_slots = 3
                add_building_construction = {
                    type = arms_factory
                    level = 3
                    instant_build = yes
                }
            }
            division_template = {
                name = "Belarusian Imperial Division"
                priority = 1
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 0 y = 3 }
                }
            }
            set_division_template_lock = {
                division_template = "NKVD Pogranichnaya Diviziya"
                is_locked = no
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"1st Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"2nd Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"3rd Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"4th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"5th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"6th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"7th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"8th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"9th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"10th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"11th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"12th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"13th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.9"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"14th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.8"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"15th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.8"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"16th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.7"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"17th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.7"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"18th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.6"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"19th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.4"
                    owner = BLR
                }
                create_unit = {
                    division = "name = \"20th Belarusian Imperial Division\" division_template = \"Belarusian Imperial Division\" start_experience_factor = 0.4 start_equipment_factor = 0.4"
                    owner = BLR
                }
            }
        }
    }
    else_if = {
        limit = {
            AND = {
                SOV = {
                    NOT = {
                        has_country_flag = control_belarus
                    }
                }
                country_exists = BLR
            }
        }
        SOU = {
            annex_country = {
                target = BLR
                transfer_troops = no
            }
            add_state_core = 207
            add_state_core = 206
            add_state_core = 241
            add_state_core = 204
            add_state_core = 194
        }
    }
}

#Spawn Elite Division if the Player Has the Country Flag
sov_spawn_elite_divisions_scw = {
    if= {
        limit = {
            SOV = {
                has_country_flag = train_elite_soldiers_civil_war
            }
        }
        SOV = {
            division_template = {
                name = "gvardeyskaya pekhotnaya diviziya"
                priority = 1
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 0 y = 3 }
                    infantry = { x = 0 y = 4 }
                    infantry = { x = 1 y = 0 }
                    infantry = { x = 1 y = 1 }
                    infantry = { x = 1 y = 2 }
                    infantry = { x = 1 y = 3 }
                    infantry = { x = 1 y = 4 }
                    artillery_brigade = { x = 2 y = 0 }
                }
                support = {
                    engineer = { x = 0 y = 0 }
                    recon = { x = 0 y = 1 }
                    artillery = { x = 0 y = 2 }
                }
            }
            division_template = {
                name = "Gvardeyskaya kavaleriyskaya diviziya"
                priority = 1
                regiments = {
                    cavalry = { x = 0 y = 0 }
                    cavalry = { x = 0 y = 1 }
                    cavalry = { x = 0 y = 2 }
                    cavalry = { x = 0 y = 3 }
                    cavalry = { x = 0 y = 4 }
                    cavalry = { x = 1 y = 0 }
                }
                support = {
                    engineer = { x = 0 y = 0 }
                    recon = { x = 0 y = 1 }
                    artillery = { x = 0 y = 2 }
                }
            }
            570 = {
                create_unit = {
                    division = "name = \"1ya Gvardeyskaya Pekhotnaya Diviziya\" division_template = \"gvardeyskaya pekhotnaya diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
                    owner = SOV
                }
                create_unit = {
                    division = "name = \"2ya Gvardeyskaya Pekhotnaya Diviziya\" division_template = \"gvardeyskaya pekhotnaya diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
                    owner = SOV
                }
                create_unit = {
                    division = "name = \"3ya Gvardeyskaya Pekhotnaya Diviziya\" division_template = \"gvardeyskaya pekhotnaya diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
                    owner = SOV
                }
                create_unit = {
                    division = "name = \"1ya Gvardeyskaya Kavaleriyskaya Diviziya\" division_template = \"Gvardeyskaya kavaleriyskaya diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
                    owner = SOV
                }
                create_unit = {
                    division = "name = \"2ya Gvardeyskaya Kavaleriyskaya Diviziya\" division_template = \"Gvardeyskaya kavaleriyskaya diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0"
                    owner = SOV
                }
            }
        }
    }
}

#Transfer Navy
sov_transfer_navy_scw = {
    transfer_ship = {
        prefer_name = "Marat"
        type = battleship
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Oktyabrskaya Revolutsiya"
        type = battleship
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Engels"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Artyom"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Volodarskiy"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Yakov Sverdlov"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Frunze"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Lenin"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Voykov"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Rykov"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Karl Libknekht"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-301"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-302"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-303"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-304"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-305"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-306"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-307"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-308"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-113"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-114"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-115"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-116"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-117"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-118"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-119"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-120"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-201"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-202"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-203"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-204"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-309"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Uritskiy"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Stalin"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-101"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-102"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-103"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-104"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-105"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-106"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-107"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-108"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-109"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-110"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-111"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shch-112"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "L-1"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "L-2"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "L-3"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "D-1"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "D-2"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "D-3"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "D-4"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "D-5"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "D-6"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Marti"
        type = light_cruiser
        target = SOU
    }
    transfer_ship = {
        prefer_name = "B-2"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "L-55"
        type = submarine
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Dzerzhinskiy"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Nezamozhnik"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Petrovskiy"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Shaumyan"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Izyaslav"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Kalinin"
        type = destroyer
        target = SOU
    }
    transfer_ship = {
        prefer_name = "Parizhskaya Kommuna"
        type = battleship
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Krasni Kavkaz"
        type = light_cruiser
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Krasny Krym"
        type = light_cruiser
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Chervona Ukraina"
        type = light_cruiser
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Komintern"
        type = light_cruiser
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Bug"
        type = destroyer
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Shch-121"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Shch-122"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Shch-123"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "Shch-124"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "A-1"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "A-2"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "A-3"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "A-4"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "A-5"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "L-4"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "L-5"
        type = submarine
        target = CRI
    }
    transfer_ship = {
        prefer_name = "L-6"
        type = submarine
        target = CRI
    }
}

#Rebalance Industry - Civil War
sov_rebalance_industry_scw = {
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            industrial_complex > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = industrial_complex
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = industrial_complex
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            arms_factory > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = arms_factory
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = arms_factory
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            arms_factory > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = arms_factory
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = arms_factory
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            arms_factory > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = arms_factory
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = arms_factory
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            arms_factory > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = arms_factory
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = arms_factory
            level = 1
            instant_build = yes
        }
    }
    random_owned_state = {
        limit = {
            arms_factory > 0
            original_white_province_second_civil_war = no
        }
        remove_building = {
            type = arms_factory
            level = 1
        }
    }
    random_owned_state = {
        limit = {
            original_white_province_second_civil_war = yes
        }
        add_extra_state_shared_building_slots = 1
        add_building_construction = {
            type = arms_factory
            level = 1
            instant_build = yes
        }
    }
}

#Spawn Elite Panzer if the Player Bought them
sov_spawn_panzer_scw = {
    if = {
        limit = {
            SOV = {
                has_country_flag = has_purchased_panzers_for_civil_war
            }
        }
        SOV = {
            load_oob = "SOV_panzer_elite_civil_war"
        }
    }
}

#Spawn Japanese Elite if the Player Recruited them
sov_spawn_japanese_elite_scw = {
    if = {
        limit = {
            SOV = {
                has_country_flag = has_recruited_japanese_elite_for_civil_war
            }
        }
        SOV = {
            load_oob = "SOV_japanese_volunteers_elite_civil_war"
        }
    }
}

#Spawn Japanese Ships if the Player Bought them
sov_spawn_japanese_ships_scw = {
    if = {
        limit = {
            SOV = {
                has_country_flag = has_recruited_japanese_elite_for_civil_war
            }
            has_dlc = "Man the Guns"
        }
        SOV = {
            load_oob = "SOV_japanese_ships_civil_war"
        }
    }
    else_if = {
        limit = {
            SOV = {
                has_country_flag = has_recruited_japanese_elite_for_civil_war
            }
            NOT ={
                has_dlc = "Man the Guns"
            }
        }
        SOV = {
            load_oob = "SOV_japanese_ships_civil_war_legacy"
        }
    }
}

#Spawn American Planes Player Bought them
sov_spawn_american_planes_scw = {
    if = {
        limit = {
            SOV = {
                has_country_flag = has_bought_american_planes_for_civil_war
            }
        }
        SOV = {
            add_equipment_to_stockpile = {
                type = fighter_equipment_1
                amount = 250
            }
            add_equipment_to_stockpile = {
                type = tac_bomber_equipment_0
                amount = 250
                producer = USA
            }
        }
    }
}

#Spawn French Artillery and Support Equipment if the Player Bought them
sov_spawn_french_equipment_scw = {
    if = {
        limit = {
            SOV = {
                has_country_flag = has_bought_french_artillery_for_civil_war
            }
        }
        SOV = {
            add_equipment_to_stockpile = {
                type = artillery_equipment
                amount = 750
                producer = FRA
            }
        }
    }

    if = {
        limit = {
            SOV = {
                has_country_flag = has_bought_french_support_equipment_for_civil_war
            }
        }
        SOV = {
            add_equipment_to_stockpile = {
                type = support_equipment
                amount = 500
                producer = FRA
            }
        }
    }
}

#Spawn Italian Volunteers and Mountaineers at the start of the civil war
sov_spawn_italian_volunteers_scw = {
    if = {
        limit = {
            SOV = {
                has_country_flag = has_trained_mountaineers_for_civil_war
                NOT = {
                    has_country_flag = control_caucasus
                }
            }
        }
        SOV = {
            load_oob = "SOV_elite_mountaineers_no_caucasus_civil_war"
        }
    }
    else_if = {
        limit = {
            SOV = {
                has_country_flag = has_trained_mountaineers_for_civil_war
                has_country_flag = control_caucasus
            }
        }
        SOV = {
            load_oob = "SOV_elite_mountaineers_has_caucasus_civil_war"
        }
    }
    if = {
        limit = {
            SOV = {
                has_country_flag = has_engaged_italian_division_for_civil_war
            }
        }
        SOV = {
            load_oob = "SOV_italian_volunteers_caucasus_civil_war"
        }
    }
}

#Event to Spawn English Ships and Marines at the start of the civil war
sov_spawn_english_ships_marines_scw = {
    if = {
        limit = {
            SOV = {
                has_country_flag = has_bought_english_ships_for_civil_war
                has_dlc = "Man the Guns"
            }
        }
        SOV = {
            load_oob = "SOV_english_naval_ships_civil_war"
        }
    }
    else_if = {
        limit = {
            SOV = {
                has_country_flag = has_bought_english_ships_for_civil_war
                NOT = {
                    has_dlc = "Man the Guns"
                }
            }
        }
        SOV = {
            load_oob = "SOV_english_naval_ships_legacy_civil_war"
        }
    }
    if = {
        limit = {
            SOV = {
                has_country_flag = has_trained_russian_marine_for_civil_war
            }
        }
        SOV = {
            set_technology = {
                marines = 1
            }
            load_oob = "SOV_elite_marines_civil_war"
        }
    }
}

sov_remove_non_existant_countries_from_scw_array = {
    for_each_scope_loop = {
        array = global.russian_scw_participants

        if = {
            limit = {
                OR = {
                    exists = no
                    AND = {
                        NOT = {
                            has_war_with = SOV
                            has_war_with = SOU
                            has_war_with = UKR
                        }
                    }
                }
            }
            log = "PREV ID : [PREV.id]"
            log = "PREV : [PREV.GetNameDef]"
            remove_from_array = { global.russian_scw_participants = PREV.id }
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants_sov = PREV.id }
                }
                remove_from_array = { global.russian_scw_participants_sov = PREV.id }
            }
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants_sou = PREV.id }
                }
                remove_from_array = { global.russian_scw_participants_sou = PREV.id }
            }
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants_ukr = PREV.id }
                }
                remove_from_array = { global.russian_scw_participants_ukr = PREV.id }
            }
            if = {
                limit = {
                    is_in_array = { global.russian_scw_participants_other = PREV.id }
                }
                remove_from_array = { global.russian_scw_participants_other = PREV.id }
            }
        }
    }
}
#End of Second Civil War

#Increase Great Purge Penalties
sov_increase_great_purge_penalties = {
    custom_effect_tooltip = sov_will_increase_purge_penalties_tt
    subtract_from_variable = { army_org_factor_great_purge = 0.02 }
    clamp_variable = {
        var = army_org_factor_great_purge
        min = var:army_org_factor_great_purge_max
        max = 0
    }
    subtract_from_variable = { send_volunteer_factor_great_purge = 0.02 }
    clamp_variable = {
        var = send_volunteer_factor_great_purge
        min = var:send_volunteer_factor_great_purge_max
        max = 0
    }
    subtract_from_variable = { army_attack_factor_great_purge = 0.02 }
    clamp_variable = {
        var = army_attack_factor_great_purge
        min = var:army_attack_factor_great_purge_max
        max = 0
    }
    subtract_from_variable = { army_defence_factor_great_purge = 0.02 }
    clamp_variable = {
        var = army_defence_factor_great_purge
        min = var:army_defence_factor_great_purge_max
        max = 0
    }
    subtract_from_variable = { party_popularity_stability_factor_great_purge = 0.02 }
    clamp_variable = {
        var = party_popularity_stability_factor_great_purge
        min = var:party_popularity_stability_factor_great_purge_max
        max = 0
    }
    subtract_from_variable = { experience_gain_army_factor_great_purge = 0.02 }
    clamp_variable = {
        var = experience_gain_army_factor_great_purge
        min = var:experience_gain_army_factor_great_purge_max
        max = 0
    }
    add_to_variable = { training_time_factor_great_purge = 0.02 }
    clamp_variable = {
        var = training_time_factor_great_purge
        min = 0
        max = var:training_time_factor_great_purge_max
    }
    add_to_variable = { political_advisor_cost_factor_great_purge = 0.02 }
    clamp_variable = {
        var = political_advisor_cost_factor_great_purge
        min = 0
        max = var:political_advisor_cost_factor_great_purge_max
    }
    if = {
        limit = {
            check_variable = {
                var = sov_great_purge_completion
                value = 100
                compare = greater_than_or_equals
            }
        }
        country_event = soviets.25
    }
}

#Calculate Democratic Custom GUI Bar Progress
calculate_sov_gui_percentage_democratic_vote = {
    if = {
        limit = {
            OR = {
                check_variable = {
                    var = current_democratic_vote^0
                    value = 1
                    compare = greater_than_or_equals
                }
                check_variable = {
                    var = current_democratic_vote^1
                    value = 1
                    compare = greater_than_or_equals
                }
            }
        }
        set_variable = { sov_gui_percentage_democratic_vote = current_democratic_vote^0 }
        divide_variable = { sov_gui_percentage_democratic_vote = current_democratic_vote_registered^num }
        multiply_variable = { sov_gui_percentage_democratic_vote = 100 }
        round_variable = sov_gui_percentage_democratic_vote
        clamp_variable = {
            var = sov_gui_percentage_democratic_vote
            min = 0
            max = 100
        }
    }
    else = {
        set_variable = { sov_gui_percentage_democratic_vote = 50 }
    }
}

rr_lock_all_templates = {
    country_lock_all_division_template = yes
}

rr_unlock_all_templates = {
    country_lock_all_division_template = no
    division_template = {
        name = "Vozdushno-Desantnaya Brigada"
        is_locked = no
        division_names_group = SOV_PAR_01

        regiments = {
            paratrooper = { x = 0 y = 0 }
            paratrooper = { x = 0 y = 1 }
        }
    }
}

black_revolution_division_template_organiser = {
    delete_unit_template_and_units = {
        division_template = "Militsiya Gornostrelkovaya Diviziya"
    }
    delete_unit_template_and_units = {
        division_template = "Povstancheskaya Militsiya Diviziya"
    }
    delete_unit_template_and_units = {
        division_template = "Militsiya Motorizirovannaya Diviziya"
    }
    delete_unit_template_and_units = {
        division_template = "Militsiya Kavaleriyskaya Diviziya"
    }
    set_division_template_lock = {
        division_template = "Povstancheskaya Diviziya"
        is_locked = yes
    }
    set_division_template_lock = {
        division_template = "Gornostrelkovaya Diviziya"
        is_locked = yes
    }
    set_division_template_lock = {
        division_template = "Motorizirovannaya Povstancheskaya Diviziya"
        is_locked = yes
    }
    set_division_template_lock = {
        division_template = "Kavaleriyskaya Povstancheskaya Diviziya"
        is_locked = yes
    }
    set_division_template_lock = {
        division_template = "Tankovaya Povstancheskaya Diviziya"
        is_locked = yes
    }
    set_division_template_lock = {
        division_template = "Vozdushno-Desantnaya Brigada"
        is_locked = yes
    }
    set_division_template_lock = {
        division_template = "Strelkovaya Diviziya"
        is_locked = yes
    }
}

anarchy_unlock_division_template = {
    set_division_template_lock = {
        division_template = "Povstancheskaya Diviziya"
        is_locked = no
    }
    set_division_template_lock = {
        division_template = "Gornostrelkovaya Diviziya"
        is_locked = no
    }
    set_division_template_lock = {
        division_template = "Motorizirovannaya Povstancheskaya Diviziya"
        is_locked = no
    }
    set_division_template_lock = {
        division_template = "Kavaleriyskaya Povstancheskaya Diviziya"
        is_locked = no
    }
    set_division_template_lock = {
        division_template = "Tankovaya Povstancheskaya Diviziya"
        is_locked = no
    }
    set_division_template_lock = {
        division_template = "Vozdushno-Desantnaya Brigada"
        is_locked = no
    }
    set_division_template_lock = {
        division_template = "Strelkovaya Diviziya"
        is_locked = no
    }
}

communism_great_purge_variable_calculator = {
    #First Reform
    set_variable = { army_org_factor_great_purge_loca = army_org_factor_great_purge } #-0.4
    multiply_variable = { army_org_factor_great_purge_loca = 0.667 }
    subtract_from_variable = {
        var = army_org_factor_great_purge_loca
        value = army_org_factor_great_purge
    }
    set_variable = { army_org_factor_great_purge_loca_next = army_org_factor_great_purge } #For Next Reform
    multiply_variable = { army_org_factor_great_purge_loca_next = 0.667 } #For Next Reform
    set_variable = { send_volunteer_factor_great_purge_loca = send_volunteer_factor_great_purge } #-0.3
    multiply_variable = { send_volunteer_factor_great_purge_loca = 0.75 }
    subtract_from_variable = {
        var = send_volunteer_factor_great_purge_loca
        value = send_volunteer_factor_great_purge
    }
    set_variable = { send_volunteer_factor_great_purge_loca_next = send_volunteer_factor_great_purge } #For Next Reform
    multiply_variable = { send_volunteer_factor_great_purge_loca_next = 0.75 } #For Next Reform
    set_variable = { army_attack_factor_great_purge_loca = army_attack_factor_great_purge } #-0.4
    multiply_variable = { army_attack_factor_great_purge_loca = 0.8 }
    subtract_from_variable = {
        var = army_attack_factor_great_purge_loca
        value = army_attack_factor_great_purge
    }
    set_variable = { army_attack_factor_great_purge_loca_next = army_attack_factor_great_purge } #For Next Reform
    multiply_variable = { army_attack_factor_great_purge_loca_next = 0.8 } #For Next Reform
    set_variable = { army_defence_factor_great_purge_loca = army_defence_factor_great_purge } #-0.4
    multiply_variable = { army_defence_factor_great_purge_loca = 0.8 }
    subtract_from_variable = {
        var = army_defence_factor_great_purge_loca
        value = army_defence_factor_great_purge
    }
    set_variable = { army_defence_factor_great_purge_loca_next = army_defence_factor_great_purge } #For Next Reform
    multiply_variable = { army_defence_factor_great_purge_loca_next = 0.8 } #For Next Reform
    set_variable = { party_popularity_stability_factor_great_purge_loca = party_popularity_stability_factor_great_purge } #-0.15
    multiply_variable = { party_popularity_stability_factor_great_purge_loca = 0.6 }
    subtract_from_variable = {
        var = party_popularity_stability_factor_great_purge_loca
        value = party_popularity_stability_factor_great_purge
    }
    set_variable = { party_popularity_stability_factor_great_purge_loca_next = party_popularity_stability_factor_great_purge } #For Next Reform
    multiply_variable = { party_popularity_stability_factor_great_purge_loca_next = 0.6 } #For Next Reform
    set_variable = { experience_gain_army_factor_great_purge_loca = experience_gain_army_factor_great_purge } #-0.4
    multiply_variable = { experience_gain_army_factor_great_purge_loca = 0.8 }
    subtract_from_variable = {
        var = experience_gain_army_factor_great_purge_loca
        value = experience_gain_army_factor_great_purge
    }
    set_variable = { experience_gain_army_factor_great_purge_loca_next = experience_gain_army_factor_great_purge } #For Next Reform
    multiply_variable = { experience_gain_army_factor_great_purge_loca_next = 0.8 } #For Next Reform
    set_variable = { training_time_factor_great_purge_loca = training_time_factor_great_purge } #-0.15
    multiply_variable = { training_time_factor_great_purge_loca = 0.75 }
    subtract_from_variable = {
        var = training_time_factor_great_purge_loca
        value = training_time_factor_great_purge
    }
    set_variable = { training_time_factor_great_purge_loca_next = training_time_factor_great_purge } #For Next Reform
    multiply_variable = { training_time_factor_great_purge_loca_next = 0.75 } #For Next Reform
    set_variable = { political_advisor_cost_factor_great_purge_loca = political_advisor_cost_factor_great_purge } #-0.3
    multiply_variable = { political_advisor_cost_factor_great_purge_loca = 0.6 }
    subtract_from_variable = {
        var = political_advisor_cost_factor_great_purge_loca
        value = political_advisor_cost_factor_great_purge
    }
    set_variable = { political_advisor_cost_factor_great_purge_loca_next = political_advisor_cost_factor_great_purge } #For Next Reform
    multiply_variable = { political_advisor_cost_factor_great_purge_loca_next = 0.6 } #For Next Reform
    #Second Reform
    set_variable = { army_org_factor_great_purge_loca_2 = army_org_factor_great_purge_loca_next } #-0.25
    multiply_variable = { army_org_factor_great_purge_loca_2 = 0.625 }
    subtract_from_variable = {
        var = army_org_factor_great_purge_loca_2
        value = army_org_factor_great_purge_loca_next
    }
    set_variable = { army_org_factor_great_purge_loca_2_next = army_org_factor_great_purge_loca_next } #-0.1
    multiply_variable = { army_org_factor_great_purge_loca_2_next = 0.625 }
    subtract_from_variable = {
        var = send_volunteer_factor_great_purge_loca_2
        value = send_volunteer_factor_great_purge_loca_next
    }
    set_variable = { send_volunteer_factor_great_purge_loca_2_next = send_volunteer_factor_great_purge_loca_next } #For Next Reform
    multiply_variable = { send_volunteer_factor_great_purge_loca_2_next = 0.333 } #For Next Reform
    set_variable = { army_attack_factor_great_purge_loca_2 = army_attack_factor_great_purge_loca_next } #-0.35
    multiply_variable = { army_attack_factor_great_purge_loca_2 = 0.875 }
    subtract_from_variable = {
        var = army_attack_factor_great_purge_loca_2
        value = army_attack_factor_great_purge_loca_next
    }
    set_variable = { army_attack_factor_great_purge_loca_2_next = army_attack_factor_great_purge_loca_next } #For Next Reform
    multiply_variable = { army_attack_factor_great_purge_loca_2_next = 0.875 } #For Next Reform
    set_variable = { army_defence_factor_great_purge_loca_2 = army_defence_factor_great_purge_loca_next } #-0.35
    multiply_variable = { army_defence_factor_great_purge_loca_2 = 0.875 }
    subtract_from_variable = {
        var = army_defence_factor_great_purge_loca_2
        value = army_defence_factor_great_purge_loca_next
    }
    set_variable = { army_defence_factor_great_purge_loca_2_next = army_defence_factor_great_purge_loca_next } #For Next Reform
    multiply_variable = { army_defence_factor_great_purge_loca_2_next = 0.875 } #For Next Reform
    set_variable = { party_popularity_stability_factor_great_purge_loca_2 = party_popularity_stability_factor_great_purge_loca_next } #-0.1
    multiply_variable = { party_popularity_stability_factor_great_purge_loca_2 = 0.667 }
    subtract_from_variable = {
        var = party_popularity_stability_factor_great_purge_loca_2
        value = party_popularity_stability_factor_great_purge_loca_next
    }
    set_variable = { party_popularity_stability_factor_great_purge_loca_2_next = party_popularity_stability_factor_great_purge_loca_next } #For Next Reform
    multiply_variable = { party_popularity_stability_factor_great_purge_loca_2_next = 0.667 } #For Next Reform
    set_variable = { experience_gain_army_factor_great_purge_loca_2 = experience_gain_army_factor_great_purge_loca_next } #-0.3
    multiply_variable = { experience_gain_army_factor_great_purge_loca_2 = 0.75 }
    subtract_from_variable = {
        var = experience_gain_army_factor_great_purge_loca_2
        value = experience_gain_army_factor_great_purge_loca_next
    }
    set_variable = { experience_gain_army_factor_great_purge_loca_2_next = experience_gain_army_factor_great_purge_loca_next } #For Next Reform
    multiply_variable = { experience_gain_army_factor_great_purge_loca_2_next = 0.75 } #For Next Reform
    set_variable = { training_time_factor_great_purge_loca_2 = training_time_factor_great_purge_loca_next } #-0.1
    multiply_variable = { training_time_factor_great_purge_loca_2 = 0.667 }
    subtract_from_variable = {
        var = training_time_factor_great_purge_loca_2
        value = training_time_factor_great_purge_loca_next
    }
    set_variable = { training_time_factor_great_purge_loca_2_next = training_time_factor_great_purge_loca_next } #For Next Reform
    multiply_variable = { training_time_factor_great_purge_loca_2_next = 0.667 } #For Next Reform
    set_variable = { political_advisor_cost_factor_great_purge_loca_2 = political_advisor_cost_factor_great_purge_loca_next } #-0.15
    multiply_variable = { political_advisor_cost_factor_great_purge_loca_2 = 0.5 }
    subtract_from_variable = {
        var = political_advisor_cost_factor_great_purge_loca_2
        value = political_advisor_cost_factor_great_purge_loca_next
    }
    set_variable = { political_advisor_cost_factor_great_purge_loca_2_next = political_advisor_cost_factor_great_purge_loca_next } #For Next Reform
    multiply_variable = { political_advisor_cost_factor_great_purge_loca_2_next = 0.5 } #For Next Reform
    #Third Reform
    set_variable = { send_volunteer_factor_great_purge_loca_3 = send_volunteer_factor_great_purge_loca_2_next } #0
    multiply_variable = { send_volunteer_factor_great_purge_loca_3 = 0 }
    subtract_from_variable = {
        var = send_volunteer_factor_great_purge_loca_3
        value = send_volunteer_factor_great_purge_loca_2_next
    }
    set_variable = { army_attack_factor_great_purge_loca_3 = army_attack_factor_great_purge_loca_2_next } #-0.25
    multiply_variable = { army_attack_factor_great_purge_loca_3 = 0.714 }
    subtract_from_variable = {
        var = army_attack_factor_great_purge_loca_3
        value = army_attack_factor_great_purge_loca_2_next
    }
    set_variable = { army_attack_factor_great_purge_loca_3_next = army_attack_factor_great_purge_loca_2_next } #For Next Reform
    multiply_variable = { army_attack_factor_great_purge_loca_3_next = 0.714 } #For Next Reform
    set_variable = { army_defence_factor_great_purge_loca_3 = army_defence_factor_great_purge_loca_2_next } #-0.25
    multiply_variable = { army_defence_factor_great_purge_loca_3 = 0.714 }
    subtract_from_variable = {
        var = army_defence_factor_great_purge_loca_3
        value = army_defence_factor_great_purge_loca_2_next
    }
    set_variable = { army_defence_factor_great_purge_loca_3_next = army_defence_factor_great_purge_loca_2_next } #For Next Reform
    multiply_variable = { army_defence_factor_great_purge_loca_3_next = 0.714 } #For Next Reform
    set_variable = { party_popularity_stability_factor_great_purge_loca_3 = party_popularity_stability_factor_great_purge_loca_2_next } #0
    multiply_variable = { party_popularity_stability_factor_great_purge_loca_3 = 0 }
    subtract_from_variable = {
        var = party_popularity_stability_factor_great_purge_loca_3
        value = party_popularity_stability_factor_great_purge_loca_2_next
    }
    set_variable = { experience_gain_army_factor_great_purge_loca_3 = experience_gain_army_factor_great_purge_loca_2_next } #-0.15
    multiply_variable = { experience_gain_army_factor_great_purge_loca_3 = 0.5 }
    subtract_from_variable = {
        var = experience_gain_army_factor_great_purge_loca_3
        value = experience_gain_army_factor_great_purge_loca_2_next
    }
    set_variable = { experience_gain_army_factor_great_purge_loca_3_next = experience_gain_army_factor_great_purge_loca_2_next } #For Next Reform
    multiply_variable = { experience_gain_army_factor_great_purge_loca_3_next = 0.5 } #For Next Reform
    set_variable = { training_time_factor_great_purge_loca_3 = training_time_factor_great_purge_loca_2_next } #-0.05
    multiply_variable = { training_time_factor_great_purge_loca_3 = 0.5 }
    subtract_from_variable = {
        var = training_time_factor_great_purge_loca_3
        value = training_time_factor_great_purge_loca_2_next
    }
    set_variable = { training_time_factor_great_purge_loca_3_next = training_time_factor_great_purge_loca_2_next } #For Next Reform
    multiply_variable = { training_time_factor_great_purge_loca_3_next = 0.5 } #For Next Reform
    set_variable = { political_advisor_cost_factor_great_purge_loca_3 = political_advisor_cost_factor_great_purge_loca_2_next } #0
    multiply_variable = { political_advisor_cost_factor_great_purge_loca_3 = 0 }
    subtract_from_variable = {
        var = political_advisor_cost_factor_great_purge_loca_3
        value = political_advisor_cost_factor_great_purge_loca_2_next
    }
    #Fourth Reform
    set_variable = { army_org_factor_great_purge_loca_4 = army_org_factor_great_purge_loca_2_next } #-0.2
    multiply_variable = { army_org_factor_great_purge_loca_4 = 0.8 }
    subtract_from_variable = {
        var = army_org_factor_great_purge_loca_4
        value = army_org_factor_great_purge_loca_2_next
    }
    set_variable = { army_org_factor_great_purge_loca_4_next = army_org_factor_great_purge_loca_2_next } #For Next Reform
    multiply_variable = { army_org_factor_great_purge_loca_4_next = 0.8 } #For Next Reform
    set_variable = { army_attack_factor_great_purge_loca_4 = army_attack_factor_great_purge_loca_3_next } #-0.15
    multiply_variable = { army_attack_factor_great_purge_loca_4 = 0.6 }
    subtract_from_variable = {
        var = army_attack_factor_great_purge_loca_4
        value = army_attack_factor_great_purge_loca_3_next
    }
    set_variable = { army_attack_factor_great_purge_loca_4_next = army_attack_factor_great_purge_loca_3_next } #For Next Reform
    multiply_variable = { army_attack_factor_great_purge_loca_4_next = 0.6 } #For Next Reform
    set_variable = { army_defence_factor_great_purge_loca_4 = army_defence_factor_great_purge_loca_3_next } #-0.15
    multiply_variable = { army_defence_factor_great_purge_loca_4 = 0.6 }
    subtract_from_variable = {
        var = army_defence_factor_great_purge_loca_4
        value = army_defence_factor_great_purge_loca_3_next
    }
    set_variable = { army_defence_factor_great_purge_loca_4_next = army_defence_factor_great_purge_loca_3_next } #For Next Reform
    multiply_variable = { army_defence_factor_great_purge_loca_4_next = 0.6 } #For Next Reform
    set_variable = { experience_gain_army_factor_great_purge_loca_4 = experience_gain_army_factor_great_purge_loca_3_next } #-0.05
    multiply_variable = { experience_gain_army_factor_great_purge_loca_4 = 0.333 }
    subtract_from_variable = {
        var = experience_gain_army_factor_great_purge_loca_4
        value = experience_gain_army_factor_great_purge_loca_3_next
    }
    set_variable = { experience_gain_army_factor_great_purge_loca_4_next = experience_gain_army_factor_great_purge_loca_3_next } #For Next Reform
    multiply_variable = { experience_gain_army_factor_great_purge_loca_4_next = 0.333 } #For Next Reform
    set_variable = { training_time_factor_great_purge_loca_4 = training_time_factor_great_purge_loca_3_next } #0
    multiply_variable = { training_time_factor_great_purge_loca_4 = 0 }
    subtract_from_variable = {
        var = training_time_factor_great_purge_loca_4
        value = training_time_factor_great_purge_loca_3_next
    }
    #Fifth Reform
    set_variable = { army_org_factor_great_purge_loca_5 = army_org_factor_great_purge_loca_4_next } #-0.1
    multiply_variable = { army_org_factor_great_purge_loca_5 = 0.5 }
    subtract_from_variable = {
        var = army_org_factor_great_purge_loca_5
        value = army_org_factor_great_purge_loca_4_next
    }
    set_variable = { army_attack_factor_great_purge_loca_5 = army_attack_factor_great_purge_loca_4_next } #-0.1
    multiply_variable = { army_attack_factor_great_purge_loca_5 = 0.667 }
    subtract_from_variable = {
        var = army_attack_factor_great_purge_loca_5
        value = army_attack_factor_great_purge_loca_4_next
    }
    set_variable = { army_defence_factor_great_purge_loca_5 = army_defence_factor_great_purge_loca_4_next } #-0.05
    multiply_variable = { army_defence_factor_great_purge_loca_5 = 0.333 }
    subtract_from_variable = {
        var = army_defence_factor_great_purge_loca_5
        value = army_defence_factor_great_purge_loca_4_next
    }
    set_variable = { experience_gain_army_factor_great_purge_loca_5 = experience_gain_army_factor_great_purge_loca_4_next } #0
    multiply_variable = { experience_gain_army_factor_great_purge_loca_5 = 0 }
    subtract_from_variable = {
        var = experience_gain_army_factor_great_purge_loca_5
        value = experience_gain_army_factor_great_purge_loca_4_next
    }
}

extra_division_soviet_russian_cw = {
    if = {
        limit = {
            SOV = {
                NOT = {
                    has_country_flag = control_caucasus
                }
            }
        }
        SOU = {
            load_oob = "SOU_no_control_caucasus"
        }
    }
    if = {
        limit = {
            SOV = {
                NOT = {
                    has_country_flag = control_central_asia
                }
            }
        }
        SOU = {
            load_oob = "SOU_no_control_central_asia"
        }
    }
    if = {
        limit = {
            SOV = {
                NOT = {
                    has_country_flag = control_belarus
                }
            }
        }
        SOU = {
            load_oob = "SOU_no_control_belarus"
        }
    }
}

kievan_rus_state = {
    for_each_scope_loop = {
        array = SOV.owned_controlled_states
        if = {
            limit = {
                THIS = {
                    OR = {
                        state = 194
                        state = 204
                        state = 241
                        state = 206
                        state = 207
                        state = 210
                        state = 209
                        state = 208
                        state = 195
                        state = 244
                        state = 264
                        state = 216
                        state = 224
                        state = 243
                        state = 242
                        state = 246
                        state = 263
                        state = 234
                        state = 240
                        state = 220
                        state = 222
                        state = 205
                        state = 219
                        state = 247
                        state = 223
                        state = 215
                        state = 214
                        state = 351
                        state = 248
                        state = 253
                    }
                }
            }
            add_to_array = { global.kievan_rus_state_ukraine = THIS }	
        }	
    }
}