on_actions = {
	#Country Gets Event to Give Back Bulgarian Claim
	on_weekly = {
		effect = {
			if = {
				limit = {
					is_in_faction_with = SOV
					any_owned_state = {
						has_state_flag = state_claimed_bulgaria_slavic_alliance
					}
					NOT = {
						tag = BUL
						has_country_flag = receive_event_bulgaria
					}
					BUL = {
						is_subject = no
						is_in_faction_with = SOV
						has_country_flag = SOV_BUL_accepted_claim
						NOT = {
							has_country_flag = SOV_BUL_betrayed_claims
						}
					}
				}
				country_event = { id = russia2_bulgaria.4 }
			}
		}
	}

	#If SOV completed Post War Influence focus, any country they puppet will get this national spirit
	on_daily = {
		effect = {
			if = {
				limit = {
					SOV = {
						has_completed_focus = SOV_post_war_influence
					}
					FROM = {
						is_subject_of = SOV
						NOT = {
							has_idea = SOV_Post_war_influence
						}
					}
				}
				FROM = {
					add_ideas = SOV_Post_war_influence
				}
			}
		}
	}

	#Germany Slav Incident
	on_weekly_SOV = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = received_event_germany_slav
					}
					is_in_faction_with = GER
					has_completed_focus = SOV_alliance_with_germany_junta
					has_country_flag = {
						flag = german_alliance_incident
						days > 210
					}
				}
				SOV = {
					country_event = { id = russia2_germany.12 }
				}
			}
		}
	}

	#Add Country to the Russian Sphere Research Agreement
	on_weekly = {
		effect = {
			if = {
				limit = {
					country_exists = SOV
					SOV = {
						has_completed_focus = SOV_keep_expanding_russian_sphere
					}
					NOT = {
						tag = SOV
						is_in_tech_sharing_group = sov_sphere_research
					}
					is_in_faction_with = SOV
					OR = {
						has_government = democratic
						has_government = neutrality
					}
				}
				FROM = {
					add_to_tech_sharing_group = sov_sphere_research
				}
			}
		}
	}

	#Remove Country from the Russian Sphere Research Agreement
	on_weekly = {
		effect = {
			if = {
				limit = {
					is_in_tech_sharing_group = sov_sphere_research
					OR = {
						NOT = {
							tag = SOV
							is_in_faction_with = SOV
						}
						NOT = {
							has_government = democratic
							has_government = neutrality
						}
					}
				}
				FROM = {
					remove_from_tech_sharing_group = sov_sphere_research
				}
			}
		}
	}

	#Russian Culture Promoted!
	on_weekly = {
		effect = {
			if = {
				limit = {
					SOV = {
						is_subject = no
						has_government = democratic
						NOT = {
							has_completed_focus = SOV_freedom_all
						}
					}
					FROM = {
						OR = {
							TAG = UKR
							TAG = BLR
							TAG = CIR
							TAG = CRI
							TAG = AZR
							TAG = GEO
							TAG = ARM
							TAG = DAG
							TAG = KAZ
							TAG = UZB
							TAG = KYR
							TAG = TMS
							TAG = TAJ
						}
					}
					is_subject_of = SOV
					has_country_flag = {
						flag = russian_culture_promote
						days > 365
					}
					NOT = {
						has_country_flag = receive_promote_russian_culture_event
					}
				}
				FROM = {
					country_event = { id = russia2_russia.166 }
				}
			}
		}
	}

	#Add Joint Military Idea
	on_weekly = {
		effect = {
			if = {
				limit = {
					is_in_faction_with = SOV
					SOV = {
						has_completed_focus = SOV_propose_interventions
					}
				}
				FROM = {
					add_ideas = SOV_Joint_military_planning
				}
			}
		}
	}

	#Remove Joint Military Idea
	on_weekly = {
		effect = {
			if = {
				limit = {
					has_idea = SOV_Joint_military_planning
					NOT = {
						is_in_faction_with = SOV
					}
				}
				FROM = {
					remove_ideas = SOV_Joint_military_planning
				}
			}
		}
	}

	#Add Country to the Slavic Research Agreement
	on_weekly = {
		effect = {
			if = {
				limit = {
					country_exists = SOV
					SOV = {
						has_completed_focus = SOV_slavic_alliance
					}
					NOT = {
						tag = SOV
						is_in_tech_sharing_group = sov_slavic_research
					}
					is_in_faction_with = SOV
				}
				FROM = {
					add_to_tech_sharing_group = sov_slavic_research
				}
			}
		}
	}

	#Remove Country from the Slavic Research Agreement
	on_weekly = {
		effect = {
			if = {
				limit = {
					is_in_tech_sharing_group = sov_slavic_research
					NOT = {
						tag = SOV
						is_in_faction_with = SOV
					}
				}
				FROM = {
					remove_from_tech_sharing_group = sov_slavic_research
				}
			}
		}
	}

	#Add Country to the Research Agreement of Democratic Nations
	on_weekly = {
		effect = {
			if = {
				limit = {
					country_exists = SOV
					SOV = {
						has_completed_focus = SOV_help_from_abroad
					}
					NOT = {
						tag = SOV
						is_in_tech_sharing_group = sov_progressive_research
					}
					is_in_faction_with = SOV
				}
				FROM = {
					add_to_tech_sharing_group = sov_progressive_research
				}
			}
		}
	}

	#Remove Country from the Research Agreement of Democratic Nations
	on_weekly = {
		effect = {
			if = {
				limit = {
					is_in_tech_sharing_group = sov_progressive_research
					NOT = {
						tag = SOV
						is_in_faction_with = SOV
					}
				}
				FROM = {
					remove_from_tech_sharing_group = sov_progressive_research
				}
			}
		}
	}

	#Broken ROOT-Russian Agreement
	on_weekly = {
		effect = {
			if = {
				limit = {
					has_idea = SOV_Root_russian_pact
					has_war_with = SOV
					NOT = {
						has_country_flag = receive_broken_russia_agreement
					}
				}
				FROM = {
					country_event = { id = russia2_russia.313 }
					set_country_flag = receive_broken_russia_agreement
				}
			}
		}
	}

	#Undo the hostile behaviors towards Russian enemies
	on_weekly = {
		effect = {
			if = {
				limit = {
					has_country_flag = accepted_russian_root_agreement
					NOT = {
						has_idea = SOV_Root_russian_pact
					}
				}
				FROM = {
					clr_country_flag = accepted_russian_root_agreement
				}
				every_country = {
					limit = {
						has_country_flag = is_target_of_russia_with_agreement
					}
					ROOT = {
						add_ai_strategy = {
							type = support
							id = PREV
							value = 1000
						}

						add_ai_strategy = {
							type = alliance
							id = PREV
							value = 1000
						}

						add_ai_strategy = {
							type = send_volunteers_desire
							id = PREV
							value = 1000
						}
					}
				}
			}
		}
	}

	#Enforced military access ends!
	on_weekly = {
		effect = {
			if = {
				limit = {
					has_country_flag = {
						flag = SOV_enforced_military_access
						days > 730
					}
				}
				FROM = {
					country_event = { id = russia2_russia.329 }
				}
			}
		}
	}

	#SOV ends enforced military access
	on_weekly = {
		effect = {
			if = {
				limit = {
					NOT = {
						gives_military_access_to = SOV
					}
					has_country_flag = SOV_enforced_military_access
				}
				FROM = {
					country_event = { id = russia2_russia.330 }
				}
			}
		}
	}

	#Cancel military access with SOV if war
	on_weekly = {
		effect = {
			if = {
				limit = {
					has_country_flag = SOV_enforced_military_access
					has_war_with = SOV
				}
				FROM = {
					country_event = { id = russia2_russia.334 }
				}
			}
		}
	}

	#Communist Ultimatum
	on_weekly = {
		effect = {
			if = {
				limit = {
					NOT = {
						tag = SOV
						is_in_faction_with = SOV
						is_subject_of = SOV
						has_government = communism
						has_civil_war = yes
						has_capitulated = yes
					}
					has_idea = SOV_Communist_influence_international_3
					has_country_flag = can_be_target_international
					NOT = {
						has_country_flag = communist_ultimatum_triggered
					}
				}
				FROM = {
					country_event = { id = russia2_russia.367 }
				}
			}
		}
	}

	#Give Ideas to other Russian puppets
	on_weekly = {
		effect = {
			if = {
				limit = {
					is_subject_of = SOV
					has_autonomy_state = autonomy_collaboration_government
					OR = {
						NOT = {
							has_idea = SOV_Russian_overlord
						}
						NOT = {
							has_idea = SOV_Russian_sphere_market
						}
						NOT = {
							has_idea = SOV_Russian_military_training
						}
					}
					SOV = {
						has_completed_focus = SOV_freedom_all
						has_government = democratic
						is_subject = no
						NOT = {
							has_idea = SOV_Exiled_russia
						}
					}
				}
				FROM = {
					country_event = { id = russia2_russia.393 }
				}
			}
		}
	}

	#Give Guided by Russia to all the Puppets
	on_weekly = {
		effect = {
			if = {
				limit = {
					SOV = {
						has_completed_focus = SOV_create_russian_sphere
						NOT = {
							has_completed_focus = SOV_promote_russian_culture
						}
						is_subject = no
						has_government = democratic
					}
					NOT = {
						original_tag = SOV
					}
					is_subject_of = SOV
					NOT = {
						has_idea = SOV_Guided_by_russia
					}
				}
				FROM = {
					add_ideas = SOV_Guided_by_russia
				}
			}
		}
	}

	#Give Guided by Russia 2 to all the Puppets
	on_weekly = {
		effect = {
			if = {
				limit = {
					SOV = {
						has_completed_focus = SOV_create_russian_sphere
						has_completed_focus = SOV_promote_russian_culture
						is_subject = no
						has_government = democratic
					}
					NOT = {
						original_tag = SOV
					}
					is_subject_of = SOV
					NOT = {
						has_idea = SOV_Guided_by_russia2
					}
				}
				FROM = {
					if = {
						limit = {
							has_idea = SOV_Guided_by_russia
						}
						swap_ideas = {
							remove_idea = SOV_Guided_by_russia
							add_idea = SOV_Guided_by_russia2
						}
					}
					else = {
						add_ideas = SOV_Guided_by_russia2
					}
				}
			}
		}
	}

	#Remove ai Factor if the country doesn't exist anymore
	on_weekly_SOV = {
		effect = {
			if = {
				limit = {
					tag = SOV
					has_country_flag = SOV_AI_is_influencing_international
					NOT = {
						any_country = {
							exists = yes
							has_country_flag = SOV_AI_is_target_international
						}
					}
				}
				FROM = {
					clr_country_flag = SOV_AI_is_influencing_international
				}
			}
		}
	}

	#SOV Control any States that was Claimed by Ukraine
	on_weekly_SOV = {
		effect = {
			if = {
				limit = {
					TAG = SOV
					has_country_flag = ukr_accepted_puppet_united_russia
					NOT = {
						has_country_flag = receive_ukraine_complains_land
					}
					UKR = {
						is_subject_of = SOV
						country_exists = UKR
						any_state = {
							has_state_flag = claim_by_ukr_dem_rus
							is_owned_and_controlled_by = SOV
						}
					}
					NOT = {
						UKR = {
							has_idea = SOV_Ukraininan_uprising
						}
						has_country_flag = ukr_core_claim_states
					}
				}
				FROM = {
					country_event = { id = russia2_russia.457 }
				}
			}
		}
	}

	#SOV has puppet non Soviet Republic
	on_weekly_SOV = {
		effect = {
			if = {
				limit = {
					any_country = {
						is_subject_of = SOV
						NOT = {
							has_autonomy_state = autonomy_imperial_governorates
						}
					}
					SOV = {
						has_completed_focus = SOV_great_purge2
						has_government = communism
						is_subject = no
					}
				}
				every_country = {
					limit = {
						is_subject_of = SOV
						NOT = {
							has_autonomy_state = autonomy_soviet_republic
						}
					}
					SOV = {
						set_autonomy = {
							target = PREV
							autonomy_state = autonomy_soviet_republic
						}
					}
					set_popularities = {
						democratic = 10
						neutrality = 10
						fascism = 10
						communism = 70
					}
				}
			}
		}
	}

	#SOV has puppet non Russian Protectorate
	on_weekly_SOV = {
		effect = {
			if = {
				limit = {
					any_country = {
						is_subject_of = SOV
						NOT = {
							has_autonomy_state = autonomy_russian_protectorate
						}
					}
					SOV = {
						has_completed_focus = SOV_freedom_all
						has_government = democratic
						is_subject = no
						NOT = {
							has_idea = SOV_Exiled_russia
						}
					}
				}
				every_country = {
					limit = {
						OR = {
							tag = UKR
							tag = BLR
							tag = ARM
							tag = GEO
							tag = AZR
							tag = KAZ
							tag = TMS
							tag = UZB
							tag = TAG
							tag = KYR
							tag = CIR
							tag = CRI
							tag = DAG
							tag = KAL
							tag = KAR
							tag = KUB
							tag = NOV
							tag = PRM
							tag = ROS
							tag = SIB
							tag = STP
							tag = TAT
							tag = URA
							tag = VLG
							tag = MON
							tag = TAN
							tag = EFR
							tag = KMI
							tag = VYA
						}
						is_subject_of = SOV
						NOT = {
							has_autonomy_state = autonomy_collaboration_government
						}
					}
					SOV = {
						set_autonomy = {
							target = PREV
							autonomy_state = autonomy_russian_protectorate
						}
					}
					set_popularities = {
						democratic = 70
						neutrality = 10
						fascism = 10
						communism = 10
					}
				}
			}
		}
	}

	#If One of Yalta participant is at war with SOV and vice versa
	on_daily_SOV = {
		effect = {
			if = {
				limit = {
					any_country = {
						OR = {
							TAG = ENG
							TAG = USA
							TAG = FRA
						}
						has_country_flag = has_broken_yalta_pact_war
						NOT = {
							has_country_flag = eng_accepted_yalta_conference
							has_country_flag = usa_accepted_yalta_conference
							has_country_flag = fra_accepted_yalta_conference
							has_country_flag = receive_new_status_yalta
						}
						has_war_with = SOV
					}
				}
				every_country = {
					limit = {
						OR = {
							TAG = ENG
							TAG = USA
							TAG = FRA
						}
						NOT = {
							has_country_flag = eng_accepted_yalta_conference
							has_country_flag = usa_accepted_yalta_conference
							has_country_flag = fra_accepted_yalta_conference
							has_country_flag = receive_new_status_yalta
						}
						has_war_with = SOV
					}
					country_event = { id = russia2_yaltas.12 days = 1 }
				}
				SOV = {
					if = {
						limit = {
							has_war_with = USA
							USA = {
								NOT = {
									has_country_flag = receive_new_status_yalta
								}
							}
						}
						country_event = { id = russia2_yaltas.13 days = 1 }
						USA = {
							set_country_flag = receive_new_status_yalta
						}
					}
					if = {
						limit = {
							has_war_with = ENG
							ENG = {
								NOT = {
									has_country_flag = receive_new_status_yalta
								}
							}
						}
						country_event = { id = russia2_yaltas.14 days = 1 }
						ENG = {
							set_country_flag = receive_new_status_yalta
						}
					}
					if = {
						limit = {
							has_war_with = FRA
							FRA = {
								NOT = {
									has_country_flag = receive_new_status_yalta
								}
							}
						}
						country_event = { id = russia2_yaltas.15 days = 1 }
						FRA = {
							set_country_flag = receive_new_status_yalta
						}
					}
				}
			}
		}
	}

	#If Russia has Compromised Russian-Italia Diplomatic Relation
	on_daily_SOV = {
		effect = {
			if = {
				limit = {
					has_country_flag = has_compromised_russian_italian_relation
				}
				SOV = {
					clr_country_flag = has_compromised_russian_italian_relation
					country_event = { id = russia2_generic.39 hours = 2 }
				}
			}
		}
	}

	#If Russia has Compromised Russian-Italia Diplomatic Relation
	on_daily_ITA = {
		effect = {
			if = {
				limit = {
					has_country_flag = has_compromised_russian_italian_relation
				}
				ITA = {
					clr_country_flag = has_compromised_russian_italian_relation
					country_event = { id = russia2_generic.39 hours = 2 }
				}
			}
		}
	}

	#Anastasia Struggle
	on_daily_SOV = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = sov_anna_anderson_struggle_over
					}
					has_country_flag = sov_anna_anderson_returns_russia
					has_government = neutrality
					is_subject = no
					has_capitulated = no
					has_completed_focus = SOV_restoration_tsar
					OR = {
						has_country_leader = {
							name = "Kirill Vladimirovich"
							ruling_only = yes
						}
						has_country_leader = {
							name = "Vladimir Kirillovich"
							ruling_only = yes
						}
					}
					NOT = {
						has_completed_focus = SOV_the_emperor
						has_completed_focus = SOV_the_empress
						has_country_leader = {
							name = "Anastasia Nikolaevna"
							ruling_only = yes
						}
					}
				}
				add_to_variable = { anna_anderson_legitimacy = var:anna_anderson_daily_legitimacy_gain }
				clamp_variable = {
					var = anna_anderson_legitimacy
					min = 0
					max = 1
				}
				set_variable = { anna_anderson_legitimacy_gui = anna_anderson_legitimacy }
				multiply_variable = { anna_anderson_legitimacy_gui = 100 }
				multiply_variable = { anna_anderson_legitimacy_gui = 2 }
				round_variable = anna_anderson_legitimacy_gui
				clamp_variable = {
					var = anna_anderson_legitimacy
					min = 0
					max = 200
				}
			}
		}
	}

	#The Great Purge (fire a random event OR fire the revolution)
	on_monthly_SOV = {
		effect = {
			if = {
				limit = {
					has_government = communism
					is_subject = no
					has_civil_war = no
					has_idea = SOV_Great_purge
					has_country_flag = sov_purge_ongoing
					NOT = {
						has_country_flag = sov_purge_cancelled
						has_country_flag = sov_purge_over
					}
				}
				set_temp_variable = { purge_array_count = sov_great_purge_trigger^num }
				multiply_temp_variable = { purge_array_count = 0.8 }
				set_temp_variable = { purge_array_trigger_count = 0 }
				for_each_loop = {
					array = sov_great_purge_trigger

					if = {
						limit = {
							check_variable = {
								var = v
								value = 1
								compare = equals
							}
						}
						add_to_temp_variable = { purge_array_trigger_count = 1 }
					}
				}
				if = {
					limit = {
						date > 1939.01.01
						check_variable = {
							var = purge_array_trigger_count
							value = purge_array_count
							compare = greater_than
						}
					}
					country_event = russia2_russia.49
				}
				else_if = {
					limit = {
						check_variable = {
							var = sov_great_purge_events^num
							value = 1
							compare = greater_than_or_equals
						}
					}
					set_temp_variable = { random_purge_event = 0 }
					randomize_temp_variable = {
						var = random_purge_event
						distribution = uniform
						min = 0
						max = sov_great_purge_events^num
					}
					round_temp_variable = random_purge_event
					if = {
						limit = {
							check_variable = {
								var = random_purge_event
								value = sov_great_purge_events^num
								compare = greater_than_or_equals
							}
						}
						set_temp_variable = { random_purge_event = 0 }
					}
					set_temp_variable = { random_purge_event_id = sov_great_purge_events^var:random_purge_event }
					meta_effect = {
						text = {
							country_event = [PURGE_EVENT]
						}
						PURGE_EVENT = "russia2_russia.[?random_purge_event_id]"
					}
					remove_from_array = {
						array = sov_great_purge_events
						index = random_purge_event
					}
				}
			}
		}
	}

	#Remove Country who doesn't belong with SOV during Civil War
	on_daily = {
		effect = {
			if = {
				limit = {
					FROM = {
						NOT = {
							TAG = SOV
							TAG = UKR
							TAG = BLR
							TAG = KAZ
							TAG = TMS
							TAG = GEO
							TAG = ARM
							TAG = AZR
							TAG = CRI
							is_subject = yes
						}
						is_in_faction_with = SOV
					}
					SOV = {
						has_global_flag = second_russian_civil_war_in_progress
						OR = {
							has_war_with = SOU
							has_war_with = UKR
						}
					}
				}
				FROM = {
					leave_faction = yes
					if = {
						limit = {
							has_war_with = SOU
						}
						white_peace = SOU
					}
					if = {
						limit = {
							has_war_with = UKR
						}
						white_peace = UKR
					}
				}
			}
		}
	}

	#Remove National Spirits if RCW is over
	on_daily = {
		effect = {
			if = {
				limit = {
					FROM = {
						OR = {
							has_idea = SOV_Supply_line
							has_idea = SOV_Second_civil_war
							has_idea = SOV_Urals_secret
							has_idea = SOV_Slow_industry
							has_idea = SOV_Organize_volunteer_forces
						}
						has_global_flag = second_russian_civil_war_over
						NOT = {
							has_global_flag = second_russian_civil_war_in_progress
						}
					}
				}
				FROM = {
					remove_ideas = SOV_Supply_line
					remove_ideas = SOV_Second_civil_war
					remove_ideas = SOV_Urals_secret
					remove_ideas = SOV_Slow_industry
					remove_ideas = SOV_Organize_volunteer_forces
				}
			}
		}
	}

	#Anarchist Ukraine
	on_daily_UKR = {
		effect = {
			if = {
				limit = {
					has_government = anarchy
					is_subject = no
				}
				ukr_update_anarchist_states = yes
				ukr_update_state_cost = yes
				ukr_add_daily_gain_anarchist_states = yes
				ukr_update_current_view = yes
			}
		}
	}

	#Anarchist Ukraine
	on_monthly_UKR = {
		effect = {
			if = {
				limit = {
					has_government = anarchy
					is_subject = no
					has_idea = UKR_Our_will_our_weapon
				}
				add_to_variable = { ukr.anarchist_coring_points = 2 }
			}
		}
	}
}